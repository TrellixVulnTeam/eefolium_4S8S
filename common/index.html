
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://giswqs.github.io/eefolium/common/" rel="canonical"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.1.7" name="generator"/>
<title>common module - eefolium</title>
<link href="../assets/stylesheets/main.19753c6b.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.196e0c26.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#common-module">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="eefolium" class="md-header-nav__button md-logo" href="https://giswqs.github.io/eefolium" title="eefolium">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            eefolium
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              common module
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/giswqs/eefolium/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="eefolium" class="md-nav__button md-logo" href="https://giswqs.github.io/eefolium" title="eefolium">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    eefolium
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/giswqs/eefolium/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
      Home
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../get-started/">
      Get Started
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../usage/">
      Usage
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tutorials/">
      Tutorials
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing/">
      Contributing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../citations/">
      Citations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../faq/">
      FAQ
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://eefolium-tutorials.herokuapp.com">
      Voil√† App
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://blog.gishub.org">
      Blog
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.youtube.com/c/QiushengWu">
      YouTube Channel
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/giswqs/eefolium/issues">
      Report Issues
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-13" id="nav-13" type="checkbox"/>
<label class="md-nav__link" for="nav-13">
      API Reference
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-13">
<span class="md-nav__icon md-icon"></span>
        API Reference
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        common module
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
      common module
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common">
    eefolium.common
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.adjust_longitude">
    adjust_longitude()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.annual_NAIP">
    annual_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.api_docs">
    api_docs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.array_mean">
    array_mean()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.array_sum">
    array_sum()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.bands_to_image_collection">
    bands_to_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.bbox_to_geojson">
    bbox_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.check_git_install">
    check_git_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.check_install">
    check_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_github_repo">
    clone_github_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_google_repo">
    clone_google_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_repo">
    clone_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.column_stats">
    column_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.coords_to_geojson">
    coords_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.copy_credentials_to_colab">
    copy_credentials_to_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.copy_credentials_to_drive">
    copy_credentials_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.create_nlcd_qml">
    create_nlcd_qml()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.credentials_in_colab">
    credentials_in_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.credentials_in_drive">
    credentials_in_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.date_sequence">
    date_sequence()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.dict_to_csv">
    dict_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_ee_video">
    download_ee_video()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_from_gdrive">
    download_from_gdrive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_from_url">
    download_from_url()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_data_html">
    ee_data_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_geojson">
    ee_export_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image">
    ee_export_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_collection">
    ee_export_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_collection_to_drive">
    ee_export_image_collection_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_to_drive">
    ee_export_image_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_vector">
    ee_export_vector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_vector_to_drive">
    ee_export_vector_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_initialize">
    ee_initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_num_round">
    ee_num_round()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_csv">
    ee_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_geojson">
    ee_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_numpy">
    ee_to_numpy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_shp">
    ee_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.explode">
    explode()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.extract_values_to_points">
    extract_values_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_HUC08">
    filter_HUC08()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_HUC10">
    filter_HUC10()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_NWI">
    filter_NWI()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_polygons">
    filter_polygons()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_HUC08">
    find_HUC08()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_HUC10">
    find_HUC10()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_landsat_by_path_row">
    find_landsat_by_path_row()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_NAIP">
    find_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_NWI">
    find_NWI()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.geojson_to_ee">
    geojson_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_all_NAIP">
    get_all_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_annual_NAIP">
    get_annual_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_bounds">
    get_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_center">
    get_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_bands">
    get_COG_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_bounds">
    get_COG_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_center">
    get_COG_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_tile">
    get_COG_tile()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_bands">
    get_STAC_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_bounds">
    get_STAC_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_center">
    get_STAC_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_tile">
    get_STAC_tile()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.hex_to_rgb">
    hex_to_rgb()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_area">
    image_area()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_band_names">
    image_band_names()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_cell_size">
    image_cell_size()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_date">
    image_date()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_max_value">
    image_max_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_mean_value">
    image_mean_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_min_value">
    image_min_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_props">
    image_props()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_reclassify">
    image_reclassify()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_scale">
    image_scale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_smoothing">
    image_smoothing()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_stats">
    image_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_std_value">
    image_std_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_sum_value">
    image_sum_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.in_colab_shell">
    in_colab_shell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.install_from_github">
    install_from_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_drive_mounted">
    is_drive_mounted()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_latlon_valid">
    is_latlon_valid()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_tool">
    is_tool()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_timeseries">
    landsat_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_gif">
    landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_norm_diff">
    landsat_ts_norm_diff()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_norm_diff_gif">
    landsat_ts_norm_diff_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.latlon_from_text">
    latlon_from_text()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.legend_from_ee">
    legend_from_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.load_GeoTIFF">
    load_GeoTIFF()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.load_GeoTIFFs">
    load_GeoTIFFs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.minimum_bounding_box">
    minimum_bounding_box()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.naip_timeseries">
    naip_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.num_round">
    num_round()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.nwi_add_color">
    nwi_add_color()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.open_github">
    open_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.open_youtube">
    open_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.random_string">
    random_string()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.remove_geometry">
    remove_geometry()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.rename_bands">
    rename_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.rgb_to_hex">
    rgb_to_hex()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.search_ee_data">
    search_ee_data()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.sentinel2_timeseries">
    sentinel2_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.set_proxy">
    set_proxy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.shp_to_ee">
    shp_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.shp_to_geojson">
    shp_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.str_to_num">
    str_to_num()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.summarize_by_group">
    summarize_by_group()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.summary_stats">
    summary_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.update_package">
    update_package()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area">
    vec_area()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_ha">
    vec_area_ha()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_km2">
    vec_area_km2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_mi2">
    vec_area_mi2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vis_to_qml">
    vis_to_qml()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.xy_to_points">
    xy_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.zonal_statistics">
    zonal_statistics()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.zonal_statistics_by_group">
    zonal_statistics_by_group()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../conversion/">
      conversion module
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../eefolium/">
      eefolium module
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common">
    eefolium.common
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.adjust_longitude">
    adjust_longitude()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.annual_NAIP">
    annual_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.api_docs">
    api_docs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.array_mean">
    array_mean()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.array_sum">
    array_sum()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.bands_to_image_collection">
    bands_to_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.bbox_to_geojson">
    bbox_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.check_git_install">
    check_git_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.check_install">
    check_install()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_github_repo">
    clone_github_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_google_repo">
    clone_google_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.clone_repo">
    clone_repo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.column_stats">
    column_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.coords_to_geojson">
    coords_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.copy_credentials_to_colab">
    copy_credentials_to_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.copy_credentials_to_drive">
    copy_credentials_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.create_nlcd_qml">
    create_nlcd_qml()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.credentials_in_colab">
    credentials_in_colab()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.credentials_in_drive">
    credentials_in_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.date_sequence">
    date_sequence()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.dict_to_csv">
    dict_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_ee_video">
    download_ee_video()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_from_gdrive">
    download_from_gdrive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.download_from_url">
    download_from_url()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_data_html">
    ee_data_html()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_geojson">
    ee_export_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image">
    ee_export_image()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_collection">
    ee_export_image_collection()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_collection_to_drive">
    ee_export_image_collection_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_image_to_drive">
    ee_export_image_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_vector">
    ee_export_vector()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_export_vector_to_drive">
    ee_export_vector_to_drive()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_initialize">
    ee_initialize()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_num_round">
    ee_num_round()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_csv">
    ee_to_csv()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_geojson">
    ee_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_numpy">
    ee_to_numpy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.ee_to_shp">
    ee_to_shp()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.explode">
    explode()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.extract_values_to_points">
    extract_values_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_HUC08">
    filter_HUC08()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_HUC10">
    filter_HUC10()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_NWI">
    filter_NWI()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.filter_polygons">
    filter_polygons()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_HUC08">
    find_HUC08()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_HUC10">
    find_HUC10()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_landsat_by_path_row">
    find_landsat_by_path_row()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_NAIP">
    find_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.find_NWI">
    find_NWI()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.geojson_to_ee">
    geojson_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_all_NAIP">
    get_all_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_annual_NAIP">
    get_annual_NAIP()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_bounds">
    get_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_center">
    get_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_bands">
    get_COG_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_bounds">
    get_COG_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_center">
    get_COG_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_COG_tile">
    get_COG_tile()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_bands">
    get_STAC_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_bounds">
    get_STAC_bounds()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_center">
    get_STAC_center()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.get_STAC_tile">
    get_STAC_tile()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.hex_to_rgb">
    hex_to_rgb()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_area">
    image_area()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_band_names">
    image_band_names()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_cell_size">
    image_cell_size()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_date">
    image_date()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_max_value">
    image_max_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_mean_value">
    image_mean_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_min_value">
    image_min_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_props">
    image_props()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_reclassify">
    image_reclassify()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_scale">
    image_scale()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_smoothing">
    image_smoothing()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_stats">
    image_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_std_value">
    image_std_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.image_sum_value">
    image_sum_value()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.in_colab_shell">
    in_colab_shell()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.install_from_github">
    install_from_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_drive_mounted">
    is_drive_mounted()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_latlon_valid">
    is_latlon_valid()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.is_tool">
    is_tool()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_timeseries">
    landsat_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_gif">
    landsat_ts_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_norm_diff">
    landsat_ts_norm_diff()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.landsat_ts_norm_diff_gif">
    landsat_ts_norm_diff_gif()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.latlon_from_text">
    latlon_from_text()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.legend_from_ee">
    legend_from_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.load_GeoTIFF">
    load_GeoTIFF()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.load_GeoTIFFs">
    load_GeoTIFFs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.minimum_bounding_box">
    minimum_bounding_box()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.naip_timeseries">
    naip_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.num_round">
    num_round()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.nwi_add_color">
    nwi_add_color()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.open_github">
    open_github()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.open_youtube">
    open_youtube()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.random_string">
    random_string()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.remove_geometry">
    remove_geometry()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.rename_bands">
    rename_bands()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.rgb_to_hex">
    rgb_to_hex()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.search_ee_data">
    search_ee_data()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.sentinel2_timeseries">
    sentinel2_timeseries()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.set_proxy">
    set_proxy()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.shp_to_ee">
    shp_to_ee()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.shp_to_geojson">
    shp_to_geojson()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.str_to_num">
    str_to_num()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.summarize_by_group">
    summarize_by_group()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.summary_stats">
    summary_stats()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.update_package">
    update_package()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area">
    vec_area()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_ha">
    vec_area_ha()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_km2">
    vec_area_km2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vec_area_mi2">
    vec_area_mi2()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.vis_to_qml">
    vis_to_qml()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.xy_to_points">
    xy_to_points()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.zonal_statistics">
    zonal_statistics()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#eefolium.common.zonal_statistics_by_group">
    zonal_statistics_by_group()
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/giswqs/eefolium/edit/master/docs/common.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="common-module">common module</h1>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#eefolium.common" id="eefolium.common" style="visibility: hidden; position: absolute;">
</h2>
<div class="doc doc-contents first">
<p>This module contains some common functions for both folium and ipyleaflet to interact with the Earth Engine Python API.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.adjust_longitude">
<code class="highlight language-python">
adjust_longitude<span class="p">(</span><span class="n">in_fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Adjusts longitude if it is less than -180 or greater than 180.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_fc</code></td>
<td><code>dict</code></td>
<td>
<p>The input dictionary containing coordinates.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>A dictionary containing the converted longitudes</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">adjust_longitude</span><span class="p">(</span><span class="n">in_fc</span><span class="p">):</span>
    <span class="sd">"""Adjusts longitude if it is less than -180 or greater than 180.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_fc (dict): The input dictionary containing coordinates.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the converted longitudes</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="n">in_fc</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">if</span> <span class="s1">'geometry'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Polygon'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'LineString'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">elif</span> <span class="s1">'type'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>

            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Polygon'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                        <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                            <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                        <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index1</span><span class="p">][</span><span class="n">index2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

            <span class="k">elif</span> <span class="n">in_fc</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'LineString'</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">coordinates</span><span class="p">):</span>
                    <span class="n">longitude</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">longitude</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">longitude</span>
                    <span class="k">elif</span> <span class="n">longitude</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                        <span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">-</span> <span class="mi">360</span>
                    <span class="n">in_fc</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="n">index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">longitude</span>

        <span class="k">return</span> <span class="n">in_fc</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.annual_NAIP">
<code class="highlight language-python">
annual_NAIP<span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">region</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Create an NAIP mosaic of a specified year for a specified region. </p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>year</code></td>
<td><code>int</code></td>
<td>
<p>The specified year to create the mosaic for. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>ee.Geometry</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">region</span><span class="p">):</span>
    <span class="sd">"""Create an NAIP mosaic of a specified year for a specified region. </span>

<span class="sd">    Args:</span>
<span class="sd">        year (int): The specified year to create the mosaic for. </span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    """</span>

    <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>
    <span class="n">NDWI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
        <span class="p">[</span><span class="s1">'G'</span><span class="p">,</span> <span class="s1">'N'</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'nd'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'ndwi'</span><span class="p">])</span>
    <span class="n">NDVI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
        <span class="p">[</span><span class="s1">'N'</span><span class="p">,</span> <span class="s1">'R'</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'nd'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'ndvi'</span><span class="p">])</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDWI</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDVI</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">time_start</span><span class="p">,</span> <span class="s1">'system:time_end'</span><span class="p">:</span> <span class="n">time_end</span><span class="p">})</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.api_docs">
<code class="highlight language-python">
api_docs<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Open a browser and navigate to the eefolium API documentation.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">api_docs</span><span class="p">():</span>
    <span class="sd">"""Open a browser and navigate to the eefolium API documentation.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://giswqs.github.io/eefolium'</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.array_mean">
<code class="highlight language-python">
array_mean<span class="p">(</span><span class="n">arr</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculates the mean of an array along the given axis.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arr</code></td>
<td><code>object</code></td>
<td>
<p>Array to calculate mean.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">array_mean</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="sd">"""Calculates the mean of an array along the given axis.</span>

<span class="sd">    Args:</span>
<span class="sd">        arr (object): Array to calculate mean.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">accum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.array_sum">
<code class="highlight language-python">
array_sum<span class="p">(</span><span class="n">arr</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Accumulates elements of an array along the given axis.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>arr</code></td>
<td><code>object</code></td>
<td>
<p>Array to accumulate.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">array_sum</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="sd">"""Accumulates elements of an array along the given axis.</span>

<span class="sd">    Args:</span>
<span class="sd">        arr (object): Array to accumulate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="o">.</span><span class="n">accum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.bands_to_image_collection">
<code class="highlight language-python">
bands_to_image_collection<span class="p">(</span><span class="n">img</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts all bands in an image to an image collection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to convert.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.ImageCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">bands_to_image_collection</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">"""Converts all bands in an image to an image collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    """</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span>
        <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])))</span>
    <span class="k">return</span> <span class="n">collection</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.bbox_to_geojson">
<code class="highlight language-python">
bbox_to_geojson<span class="p">(</span><span class="n">bounds</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Convert coordinates of a bounding box to a geojson.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bounds</code></td>
<td><code>list</code></td>
<td>
<p>A list of coordinates representing [left, bottom, right, top].</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>A geojson feature.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">bbox_to_geojson</span><span class="p">(</span><span class="n">bounds</span><span class="p">):</span>
    <span class="sd">"""Convert coordinates of a bounding box to a geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        bounds (list): A list of coordinates representing [left, bottom, right, top].</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A geojson feature.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">"geometry"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"Polygon"</span><span class="p">,</span>
            <span class="s2">"coordinates"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">[</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span>
                    <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
                <span class="p">]</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"Feature"</span>
    <span class="p">}</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.check_git_install">
<code class="highlight language-python">
check_git_install<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if Git is installed.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Git is installed, otherwise returns False.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">check_git_install</span><span class="p">():</span>
    <span class="sd">"""Checks if Git is installed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Git is installed, otherwise returns False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'git --version'</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">if</span> <span class="s1">'git version'</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://git-scm.com/downloads'</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">"Git is not installed. Please download Git from </span><span class="si">{}</span><span class="s2"> and install it."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.check_install">
<code class="highlight language-python">
check_install<span class="p">(</span><span class="n">package</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether a package is installed. If not, it will install the package.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package</code></td>
<td><code>str</code></td>
<td>
<p>The name of the package to check.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">check_install</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
    <span class="sd">"""Checks whether a package is installed. If not, it will install the package.</span>

<span class="sd">    Args:</span>
<span class="sd">        package (str): The name of the package to check.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">subprocess</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">__import__</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
        <span class="c1"># print('{} is already installed.'.format(package))</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> is not installed. Installing ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s2">"python"</span><span class="p">,</span> <span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'pip'</span><span class="p">,</span> <span class="s1">'install'</span><span class="p">,</span> <span class="n">package</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Failed to install </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> has been installed successfully."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">package</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.clone_github_repo">
<code class="highlight language-python">
clone_github_repo<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones a GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The link to the GitHub repository</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the cloned repository. </p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_github_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">):</span>
    <span class="sd">"""Clones a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the GitHub repository</span>
<span class="sd">        out_dir (str): The output directory for the cloned repository. </span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">zipfile</span>

    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="c1"># url_zip = os.path.join(url, 'archive/master.zip')</span>
    <span class="n">url_zip</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s1">'/archive/master.zip'</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The specified output directory already exists. Please choose a new directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">parent_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url_zip</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The provided URL is invalid. Please double check the URL."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
        <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>

    <span class="n">src</span> <span class="o">=</span> <span class="n">out_file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.zip'</span><span class="p">,</span> <span class="s1">'-master'</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.clone_google_repo">
<code class="highlight language-python">
clone_google_repo<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The link to the Earth Engine repository</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the cloned repository. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_google_repo</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Clones an Earth Engine repository from https://earthengine.googlesource.com, such as https://earthengine.googlesource.com/users/google/datasets</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The link to the Earth Engine repository</span>
<span class="sd">        out_dir (str, optional): The output directory for the cloned repository. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">repo_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_dir</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The specified output directory already exists. Please choose a new directory.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">check_git_install</span><span class="p">():</span>

        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'git clone "</span><span class="si">{}</span><span class="s1">" "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.clone_repo">
<code class="highlight language-python">
clone_repo<span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Clones the eefolium GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>Output folder for the repo. Defaults to '.'.</p>
</td>
<td><code>'.'</code></td>
</tr>
<tr>
<td><code>unzip</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to unzip the repository. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Clones the eefolium GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        out_dir (str, optional): Output folder for the repo. Defaults to '.'.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the repository. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://github.com/giswqs/eefolium/archive/master.zip'</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s1">'eefolium-master.zip'</span>
    <span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                      <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="n">unzip</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.column_stats">
<code class="highlight language-python">
column_stats<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean, 
sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>FeatureCollection</code></td>
<td>
<p>The input feature collection to calculate statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>column</code></td>
<td><code>str</code></td>
<td>
<p>The name of the column to calculate statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>stats_type</code></td>
<td><code>str</code></td>
<td>
<p>The type of statistics to calculate.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>The dictionary containing information about the requested statistics.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">column_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">):</span>
    <span class="sd">"""Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean, </span>
<span class="sd">    sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (FeatureCollection): The input feature collection to calculate statistics.</span>
<span class="sd">        column (str): The name of the column to calculate statistics.</span>
<span class="sd">        stats_type (str): The type of statistics to calculate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about the requested statistics.</span>
<span class="sd">    """</span>
    <span class="n">stats_type</span> <span class="o">=</span> <span class="n">stats_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">,</span> <span class="s1">'mean'</span><span class="p">,</span>
                     <span class="s1">'median'</span><span class="p">,</span> <span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'stdDev'</span><span class="p">,</span> <span class="s1">'variance'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">stats_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The stats type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">stats_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'min'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">'max'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s1">'mean'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">'median'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s1">'sum'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'stdDev'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s1">'variance'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="p">]</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">reduceColumns</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'selectors'</span><span class="p">:</span> <span class="n">selectors</span><span class="p">,</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">stats_dict</span><span class="p">[</span><span class="n">stats_type</span><span class="p">]</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">stats</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.coords_to_geojson">
<code class="highlight language-python">
coords_to_geojson<span class="p">(</span><span class="n">coords</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Convert a list of bbox coordinates representing [left, bottom, right, top] to geojson FeatureCollection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>coords</code></td>
<td><code>list</code></td>
<td>
<p>A list of bbox coordinates representing [left, bottom, right, top].</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>A geojson FeatureCollection.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">coords_to_geojson</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
    <span class="sd">"""Convert a list of bbox coordinates representing [left, bottom, right, top] to geojson FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        coords (list): A list of bbox coordinates representing [left, bottom, right, top].</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A geojson FeatureCollection.</span>
<span class="sd">    """</span>

    <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">bbox</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox_to_geojson</span><span class="p">(</span><span class="n">bbox</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'type'</span><span class="p">:</span> <span class="s1">'FeatureCollection'</span><span class="p">,</span> <span class="s1">'features'</span><span class="p">:</span> <span class="n">features</span><span class="p">}</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.copy_credentials_to_colab">
<code class="highlight language-python">
copy_credentials_to_colab<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Copies ee credentials from Google Drive to Google Colab.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_colab</span><span class="p">():</span>
    <span class="sd">"""Copies ee credentials from Google Drive to Google Colab.</span>
<span class="sd">    """</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.copy_credentials_to_drive">
<code class="highlight language-python">
copy_credentials_to_drive<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Copies ee credentials from Google Colab to Google Drive.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">copy_credentials_to_drive</span><span class="p">():</span>
    <span class="sd">"""Copies ee credentials from Google Colab to Google Drive.</span>
<span class="sd">    """</span>
    <span class="n">src</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>
    <span class="n">dst</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>

    <span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">wd</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.create_nlcd_qml">
<code class="highlight language-python">
create_nlcd_qml<span class="p">(</span><span class="n">out_qml</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Create a QGIS Layer Style (.qml) for NLCD data</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>out_qml</code></td>
<td><code>str</code></td>
<td>
<p>File path to the ouput qml.  </p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">create_nlcd_qml</span><span class="p">(</span><span class="n">out_qml</span><span class="p">):</span>
    <span class="sd">"""Create a QGIS Layer Style (.qml) for NLCD data</span>

<span class="sd">    Args:</span>
<span class="sd">        out_qml (str): File path to the ouput qml.  </span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>
    <span class="kn">import</span> <span class="nn">shutil</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"eefolium"</span><span class="p">,</span> <span class="s2">"eefolium.py"</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">'template'</span><span class="p">)</span>
    <span class="n">qml_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s1">'NLCD.qml'</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_qml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">qml_template</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.credentials_in_colab">
<code class="highlight language-python">
credentials_in_colab<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if the ee credentials file exists in Google Colab.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_colab</span><span class="p">():</span>
    <span class="sd">"""Checks if the ee credentials file exists in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s1">'/root/.config/earthengine/credentials'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.credentials_in_drive">
<code class="highlight language-python">
credentials_in_drive<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks if the ee credentials file exists in Google Drive.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">credentials_in_drive</span><span class="p">():</span>
    <span class="sd">"""Checks if the ee credentials file exists in Google Drive.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">credentials_path</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive/.config/earthengine/credentials'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credentials_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.date_sequence">
<code class="highlight language-python">
date_sequence<span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a date sequence.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start</code></td>
<td><code>str</code></td>
<td>
<p>The start date, e.g., '2000-01-01'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>end</code></td>
<td><code>str</code></td>
<td>
<p>The end date, e.g., '2000-12-31'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>unit</code></td>
<td><code>str</code></td>
<td>
<p>One of 'year', 'month' 'week', 'day', 'hour', 'minute', or 'second'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>date_format</code></td>
<td><code>str</code></td>
<td>
<p>A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</p>
</td>
<td><code>'YYYY-MM-dd'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.List</code></td>
<td>
<p>A list of date sequence.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">date_sequence</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">):</span>
    <span class="sd">"""Creates a date sequence.</span>

<span class="sd">    Args:</span>
<span class="sd">        start (str): The start date, e.g., '2000-01-01'.</span>
<span class="sd">        end (str): The end date, e.g., '2000-12-31'.</span>
<span class="sd">        unit (str): One of 'year', 'month' 'week', 'day', 'hour', 'minute', or 'second'.</span>
<span class="sd">        date_format (str, optional): A pattern, as described at http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html. Defaults to 'YYYY-MM-dd'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List: A list of date sequence.</span>
<span class="sd">    """</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">end_date</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">unit</span><span class="p">))</span><span class="o">.</span><span class="n">toInt</span><span class="p">()</span>
    <span class="n">num_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
    <span class="n">date_seq</span> <span class="o">=</span> <span class="n">num_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">start_date</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">date_seq</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.dict_to_csv">
<code class="highlight language-python">
dict_to_csv<span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads an ee.Dictionary as a CSV file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data_dict</code></td>
<td><code>ee.Dictionary</code></td>
<td>
<p>The input ee.Dictionary.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_csv</code></td>
<td><code>str</code></td>
<td>
<p>The output file path to the CSV file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>by_row</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to use by row or by column. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">dict_to_csv</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">,</span> <span class="n">by_row</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Downloads an ee.Dictionary as a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_dict (ee.Dictionary): The input ee.Dictionary.</span>
<span class="sd">        out_csv (str): The output file path to the CSV file.</span>
<span class="sd">        by_row (bool, optional): Whether to use by row or by column. Defaults to False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">eefolium</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_csv</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">by_row</span><span class="p">:</span>
        <span class="n">csv_feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">data_dict</span><span class="p">)</span>
        <span class="n">csv_feat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">([</span><span class="n">csv_feature</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">({</span><span class="s1">'name'</span><span class="p">:</span> <span class="n">k</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">:</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">)}))</span>
        <span class="n">csv_feature</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
        <span class="n">csv_feat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">csv_feature</span><span class="p">)</span>

    <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">csv_feat_col</span><span class="p">,</span> <span class="n">out_csv</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.download_ee_video">
<code class="highlight language-python">
download_ee_video<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads a video thumbnail as a GIF image from Earth Engine.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>video_args</code></td>
<td><code>object</code></td>
<td>
<p>Parameters for expring the video thumbnail.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output GIF.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">):</span>
    <span class="sd">"""Downloads a video thumbnail as a GIF image from Earth Engine.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (object): An ee.ImageCollection.</span>
<span class="sd">        video_args (object): Parameters for expring the video thumbnail.</span>
<span class="sd">        out_gif (str): File path to the output GIF.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".gif"</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must have an extension of .gif.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>

    <span class="k">if</span> <span class="s1">'region'</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL...'</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">getVideoThumbURL</span><span class="p">(</span><span class="n">video_args</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading GIF image from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_gif</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The GIF image has been saved to: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_gif</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.download_from_gdrive">
<code class="highlight language-python">
download_from_gdrive<span class="p">(</span><span class="n">gfile_url</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Download a file shared via Google Drive 
   (e.g., https://drive.google.com/file/d/18SUo_HcDGltuWYZs1s7PpOmOq_FvFn04/view?usp=sharing)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gfile_url</code></td>
<td><code>str</code></td>
<td>
<p>The Google Drive shared file URL</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file_name</code></td>
<td><code>str</code></td>
<td>
<p>The output file name to use.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory. Defaults to '.'.</p>
</td>
<td><code>'.'</code></td>
</tr>
<tr>
<td><code>unzip</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to unzip the output file if it is a zip file. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">download_from_gdrive</span><span class="p">(</span><span class="n">gfile_url</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Download a file shared via Google Drive </span>
<span class="sd">       (e.g., https://drive.google.com/file/d/18SUo_HcDGltuWYZs1s7PpOmOq_FvFn04/view?usp=sharing)</span>

<span class="sd">    Args:</span>
<span class="sd">        gfile_url (str): The Google Drive shared file URL</span>
<span class="sd">        file_name (str): The output file name to use.</span>
<span class="sd">        out_dir (str, optional): The output directory. Defaults to '.'.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the output file if it is a zip file. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">google_drive_downloader</span> <span class="kn">import</span> <span class="n">GoogleDriveDownloader</span> <span class="k">as</span> <span class="n">gdd</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'GoogleDriveDownloader package not installed. Installing ...'</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">"python"</span><span class="p">,</span> <span class="s1">'-m'</span><span class="p">,</span> <span class="s1">'pip'</span><span class="p">,</span> <span class="s1">'install'</span><span class="p">,</span> <span class="s1">'googledrivedownloader'</span><span class="p">])</span>
        <span class="kn">from</span> <span class="nn">google_drive_downloader</span> <span class="kn">import</span> <span class="n">GoogleDriveDownloader</span> <span class="k">as</span> <span class="n">gdd</span>

    <span class="n">file_id</span> <span class="o">=</span> <span class="n">gfile_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Google Drive file id: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_id</span><span class="p">))</span>

    <span class="n">dest_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="n">gdd</span><span class="o">.</span><span class="n">download_file_from_google_drive</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">unzip</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.download_from_url">
<code class="highlight language-python">
download_from_url<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Download a file from a URL (e.g., https://github.com/giswqs/whitebox/raw/master/examples/testdata.zip)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The HTTP URL to download.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_file_name</code></td>
<td><code>str</code></td>
<td>
<p>The output file name to use. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory to use. Defaults to '.'.</p>
</td>
<td><code>'.'</code></td>
</tr>
<tr>
<td><code>unzip</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to unzip the downloaded file if it is a zip file. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="s1">'.'</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Download a file from a URL (e.g., https://github.com/giswqs/whitebox/raw/master/examples/testdata.zip)</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The HTTP URL to download.</span>
<span class="sd">        out_file_name (str, optional): The output file name to use. Defaults to None.</span>
<span class="sd">        out_dir (str, optional): The output directory to use. Defaults to '.'.</span>
<span class="sd">        unzip (bool, optional): Whether to unzip the downloaded file if it is a zip file. Defaults to True.</span>
<span class="sd">    """</span>
    <span class="n">in_file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_file_name</span> <span class="o">=</span> <span class="n">in_file_name</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading </span><span class="si">{}</span><span class="s1"> ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"The URL is invalid. Please double check the URL."</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">final_path</span> <span class="o">=</span> <span class="n">out_file_path</span>

    <span class="k">if</span> <span class="n">unzip</span><span class="p">:</span>
        <span class="c1"># if it is a zip file</span>
        <span class="k">if</span> <span class="s1">'.zip'</span> <span class="ow">in</span> <span class="n">out_file_name</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unzipping </span><span class="si">{}</span><span class="s2"> ..."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_file_name</span><span class="p">))</span>
            <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
                <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
            <span class="n">final_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
                <span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.zip'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span>

        <span class="c1"># if it is a tar file</span>
        <span class="k">if</span> <span class="s1">'.tar'</span> <span class="ow">in</span> <span class="n">out_file_name</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unzipping </span><span class="si">{}</span><span class="s2"> ..."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_file_name</span><span class="p">))</span>
            <span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">tar_ref</span><span class="p">:</span>
                <span class="n">tar_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
            <span class="n">final_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
                <span class="n">out_dir</span><span class="p">),</span> <span class="n">out_file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.tart'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">final_path</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_data_html">
<code class="highlight language-python">
ee_data_html<span class="p">(</span><span class="n">asset</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates HTML from an asset to be used in the HTML widget.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>asset</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary containing an Earth Engine asset.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A string containing HTML.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_data_html</span><span class="p">(</span><span class="n">asset</span><span class="p">):</span>
    <span class="sd">"""Generates HTML from an asset to be used in the HTML widget.</span>

<span class="sd">    Args:</span>
<span class="sd">        asset (dict): A dictionary containing an Earth Engine asset.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing HTML.</span>
<span class="sd">    """</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">'''</span>
<span class="s1">        &lt;html&gt;</span>
<span class="s1">        &lt;body&gt;</span>
<span class="s1">            &lt;h3&gt;asset_title&lt;/h3&gt;</span>
<span class="s1">            &lt;h4&gt;Dataset Availability&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;asset_dates&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Earth Engine Snippet&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;ee_id_snippet&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Earth Engine Data Catalog&lt;/h4&gt;</span>
<span class="s1">                &lt;p style="margin-left: 40px"&gt;&lt;a href="asset_url" target="_blank"&gt;asset_id&lt;/a&gt;&lt;/p&gt;</span>
<span class="s1">            &lt;h4&gt;Dataset Thumbnail&lt;/h4&gt;</span>
<span class="s1">                &lt;img src="thumbnail_url"&gt;</span>
<span class="s1">        &lt;/body&gt;</span>
<span class="s1">        &lt;/html&gt;</span>
<span class="s1">    '''</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_title'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'title'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_dates'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'dates'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'ee_id_snippet'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'ee_id_snippet'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_id'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'asset_url'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'asset_url'</span><span class="p">])</span>
        <span class="c1"># asset['thumbnail'] = ee_data_thumbnail(asset['id'])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'thumbnail_url'</span><span class="p">,</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'thumbnail_url'</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">text</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_geojson">
<code class="highlight language-python">
ee_export_geojson<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to geojson.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output file name. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name. Defaults to None.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">random_string</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'.geojson'</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'geojson'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file type must be geojson.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'.geo'</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"selectors must be a list, such as ['attribute1', 'attribute2']"</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Attributes must be one chosen from: </span><span class="si">{}</span><span class="s1"> '</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)))</span>
                <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># print('Generating URL ...')</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="c1"># print('Downloading data from {}\nPlease wait ...'.format(url))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading. </span><span class="se">\n</span><span class="s1"> Retrying ...'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">geojson</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_image">
<code class="highlight language-python">
ee_export_image<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports an ee.Image as a GeoTIFF.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image to download.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output filename for the exported image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file_per_band</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to produce a different GeoTIFF per band. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Exports an ee.Image as a GeoTIFF.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        filename (str): Output filename for the exported image.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">filename_zip</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">,</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">!=</span> <span class="s1">'tif'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .tif'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s1">'filePerBand'</span><span class="p">:</span> <span class="n">file_per_band</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'scale'</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span>
        <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">z</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename_zip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">file_per_band</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_image_collection">
<code class="highlight language-python">
ee_export_image_collection<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports an ImageCollection as GeoTIFFs.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The ee.Image to download.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>str</code></td>
<td>
<p>The output directory for the exported images.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>file_per_band</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to produce a different GeoTIFF per band. Defaults to False.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Exports an ImageCollection as GeoTIFFs.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The ee.Image to download.</span>
<span class="sd">        out_dir (str): The output directory for the exported images.</span>
<span class="sd">        scale (float, optional): A default scale to use for any bands that do not specify one; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        crs (str, optional): A default CRS string to use for any bands that do not explicitly specify one. Defaults to None.</span>
<span class="sd">        region (object, optional): A polygon specifying a region to download; ignored if crs and crs_transform is specified. Defaults to None.</span>
<span class="sd">        file_per_band (bool, optional): Whether to produce a different GeoTIFF per band. Defaults to False.</span>
<span class="sd">    """</span>

    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.ImageCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Total number of images: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:index'</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.tif'</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_dir</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="n">ee_export_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                            <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span> <span class="n">file_per_band</span><span class="o">=</span><span class="n">file_per_band</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_image_collection_to_drive">
<code class="highlight language-python">
ee_export_image_collection_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">10000000000000.0</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{})</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a batch task to export an ImageCollection as raster images to Google Drive.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>descriptions</code></td>
<td><code>list</code></td>
<td>
<p>A list of human-readable names of the tasks. </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>The Google Drive Folder that the export will reside in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>Resolution in meters per pixel. Defaults to 10 times of the image resolution.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>CRS to use for the exported image.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_pixels</code></td>
<td><code>int</code></td>
<td>
<p>Restrict the number of pixels in the export. Defaults to 1.0E13.</p>
</td>
<td><code>10000000000000.0</code></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</p>
</td>
<td><code>'GeoTIFF'</code></td>
</tr>
<tr>
<td><code>format_options</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_collection_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">descriptions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">1.0E13</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">"""Creates a batch task to export an ImageCollection as raster images to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to export.</span>
<span class="sd">        descriptions (list): A list of human-readable names of the tasks. </span>
<span class="sd">        folder (str, optional): The Google Drive Folder that the export will reside in. Defaults to None.</span>
<span class="sd">        region (object, optional): A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</span>
<span class="sd">        scale (float, optional): Resolution in meters per pixel. Defaults to 10 times of the image resolution.</span>
<span class="sd">        crs (str, optional): CRS to use for the exported image.. Defaults to None.</span>
<span class="sd">        max_pixels (int, optional): Restrict the number of pixels in the export. Defaults to 1.0E13.</span>
<span class="sd">        file_format (str, optional): The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</span>
<span class="sd">        format_options (dict, optional): A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.ImageCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Total number of images: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="p">))</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">descriptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">descriptions</span><span class="p">)</span> <span class="o">!=</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The number of descriptions is not equal to the number of images.'</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">descriptions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">descriptions</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:index'</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">images</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">descriptions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ee_export_image_to_drive</span><span class="p">(</span>
                <span class="n">image</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">crs</span><span class="p">,</span> <span class="n">max_pixels</span><span class="p">,</span> <span class="n">file_format</span><span class="p">,</span> <span class="n">format_options</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_image_to_drive">
<code class="highlight language-python">
ee_export_image_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">10000000000000.0</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{})</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates a batch task to export an Image as a raster to Google Drive.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>str</code></td>
<td>
<p>A human-readable name of the task. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>The Google Drive Folder that the export will reside in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>Resolution in meters per pixel. Defaults to 10 times of the image resolution.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>CRS to use for the exported image.. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>max_pixels</code></td>
<td><code>int</code></td>
<td>
<p>Restrict the number of pixels in the export. Defaults to 1.0E13.</p>
</td>
<td><code>10000000000000.0</code></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</p>
</td>
<td><code>'GeoTIFF'</code></td>
</tr>
<tr>
<td><code>format_options</code></td>
<td><code>dict</code></td>
<td>
<p>A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</p>
</td>
<td><code>{}</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_image_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pixels</span><span class="o">=</span><span class="mf">1.0E13</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'GeoTIFF'</span><span class="p">,</span> <span class="n">format_options</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">"""Creates a batch task to export an Image as a raster to Google Drive.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to export.</span>
<span class="sd">        description (str): A human-readable name of the task. </span>
<span class="sd">        folder (str, optional): The Google Drive Folder that the export will reside in. Defaults to None.</span>
<span class="sd">        region (object, optional): A LinearRing, Polygon, or coordinates representing region to export. These may be specified as the Geometry objects or coordinates serialized as a string. If not specified, the region defaults to the viewport at the time of invocation. Defaults to None.</span>
<span class="sd">        scale (float, optional): Resolution in meters per pixel. Defaults to 10 times of the image resolution.</span>
<span class="sd">        crs (str, optional): CRS to use for the exported image.. Defaults to None.</span>
<span class="sd">        max_pixels (int, optional): Restrict the number of pixels in the export. Defaults to 1.0E13.</span>
<span class="sd">        file_format (str, optional): The string file format to which the image is exported. Currently only 'GeoTIFF' and 'TFRecord' are supported. Defaults to 'GeoTIFF'.</span>
<span class="sd">        format_options (dict, optional): A dictionary of string keys to format specific options, e.g., {'compressed': True, 'cloudOptimized': True}</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">folder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'driveFolder'</span><span class="p">]</span> <span class="o">=</span> <span class="n">folder</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">region</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'scale'</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">crs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="n">crs</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'maxPixels'</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_pixels</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'fileFormat'</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_format</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">'formatOptions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_options</span>

        <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1"> ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">description</span><span class="p">))</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_vector">
<code class="highlight language-python">
ee_export_vector<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>Output file name.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to other formats, including shp, csv, json, kml, and kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        filename (str): Output file name.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">zipfile</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'ee_object must be an ee.FeatureCollection'</span><span class="p">)</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'geojson'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="c1"># allowed_formats = ['csv', 'kml', 'kmz']</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'shp'</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.shp'</span><span class="p">,</span> <span class="s1">'.zip'</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Earth Engine no longer supports downloading featureCollection as shapefile or json. </span><span class="se">\n</span><span class="s1">Please use eefolium.ee_export_vector_to_drive() to export featureCollection to Google Drive.'</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'csv'</span><span class="p">:</span>
            <span class="c1"># remove .geo coordinate field</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">".*"</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'geojson'</span><span class="p">:</span>
        <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'.geo'</span><span class="p">]</span> <span class="o">+</span> <span class="n">selectors</span>

    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selectors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"selectors must be a list, such as ['attribute1', 'attribute2']"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">allowed_attributes</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">selectors</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">attribute</span> <span class="ow">in</span> <span class="n">allowed_attributes</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Attributes must be one chosen from: </span><span class="si">{}</span><span class="s1"> '</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_attributes</span><span class="p">)))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
            <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading. </span><span class="se">\n</span><span class="s1"> Retrying ...'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">filter_polygons</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Generating URL ...'</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">new_ee_object</span><span class="o">.</span><span class="n">getDownloadURL</span><span class="p">(</span>
                    <span class="n">filetype</span><span class="o">=</span><span class="n">filetype</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">'Downloading data from </span><span class="si">{}</span><span class="se">\n</span><span class="s1">Please wait ...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'An error occurred while downloading.'</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filetype</span> <span class="o">==</span> <span class="s1">'shp'</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
            <span class="n">z</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.zip'</span><span class="p">,</span> <span class="s1">'.shp'</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Data downloaded to </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_export_vector_to_drive">
<code class="highlight language-python">
ee_export_vector_to_drive<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'shp'</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Exports Earth Engine FeatureCollection to Google Drive. other formats, including shp, csv, json, kml, and kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection to export.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>description</code></td>
<td><code>str</code></td>
<td>
<p>File name of the output file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>folder</code></td>
<td><code>str</code></td>
<td>
<p>Folder name within Google Drive to save the exported file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>file_format</code></td>
<td><code>str</code></td>
<td>
<p>The supported file format include shp, csv, json, kml, kmz, and TFRecord. Defaults to 'shp'.</p>
</td>
<td><code>'shp'</code></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>The list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_export_vector_to_drive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">'shp'</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Exports Earth Engine FeatureCollection to Google Drive. other formats, including shp, csv, json, kml, and kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection to export.</span>
<span class="sd">        description (str): File name of the output file.</span>
<span class="sd">        folder (str): Folder name within Google Drive to save the exported file.</span>
<span class="sd">        file_format (str, optional): The supported file format include shp, csv, json, kml, kmz, and TFRecord. Defaults to 'shp'.</span>
<span class="sd">        selectors (list, optional): The list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The ee_object must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">,</span> <span class="s1">'tfrecord'</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">file_format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">task_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'folder'</span><span class="p">:</span> <span class="n">folder</span><span class="p">,</span>
        <span class="s1">'fileFormat'</span><span class="p">:</span> <span class="n">file_format</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">selectors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">task_config</span><span class="p">[</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectors</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">selectors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">file_format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'csv'</span><span class="p">):</span>
        <span class="c1"># remove .geo coordinate field</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">".*"</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">'Exporting </span><span class="si">{}</span><span class="s1">...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">description</span><span class="p">))</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">batch</span><span class="o">.</span><span class="n">Export</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">toDrive</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="o">**</span><span class="n">task_config</span><span class="p">)</span>
    <span class="n">task</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_initialize">
<code class="highlight language-python">
ee_initialize<span class="p">(</span><span class="n">token_name</span><span class="o">=</span><span class="s1">'EARTHENGINE_TOKEN'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Authenticates Earth Engine and initialize an Earth Engine session</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_initialize</span><span class="p">(</span><span class="n">token_name</span><span class="o">=</span><span class="s1">'EARTHENGINE_TOKEN'</span><span class="p">):</span>
    <span class="sd">"""Authenticates Earth Engine and initialize an Earth Engine session</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">ee</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">_credentials</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ee_token</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">token_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ee_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">credential_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">"~/.config/earthengine/"</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">):</span>
                    <span class="n">credential</span> <span class="o">=</span> <span class="s1">'{"refresh_token":"</span><span class="si">%s</span><span class="s1">"}'</span> <span class="o">%</span> <span class="n">ee_token</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">credential_file_path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">credential_file_path</span> <span class="o">+</span> <span class="s1">'credentials'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">credential</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">in_colab_shell</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">credentials_in_drive</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">()):</span>
                    <span class="n">copy_credentials_to_colab</span><span class="p">()</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">credentials_in_colab</span><span class="p">:</span>
                    <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">()</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">credentials_in_drive</span><span class="p">()):</span>
                        <span class="n">copy_credentials_to_drive</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">is_drive_mounted</span><span class="p">():</span>
                        <span class="n">copy_credentials_to_drive</span><span class="p">()</span>

            <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Authenticate</span><span class="p">()</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_num_round">
<code class="highlight language-python">
ee_num_round<span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Rounds a number to a specified number of decimal places.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>num</code></td>
<td><code>ee.Number</code></td>
<td>
<p>The number to round.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>decimal</code></td>
<td><code>int</code></td>
<td>
<p>The number of decimal places to round. Defaults to 2.</p>
</td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.Number</code></td>
<td>
<p>The number with the specified decimal places rounded.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">"""Rounds a number to a specified number of decimal places.</span>

<span class="sd">    Args:</span>
<span class="sd">        num (ee.Number): The number to round.</span>
<span class="sd">        decimal (int, optional): The number of decimal places to round. Defaults to 2.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Number: The number with the specified decimal places rounded.</span>
<span class="sd">    """</span>
    <span class="n">format_str</span> <span class="o">=</span> <span class="s1">'%.</span><span class="si">{}</span><span class="s1">f'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">format_str</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_to_csv">
<code class="highlight language-python">
ee_to_csv<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads an ee.FeatureCollection as a CSV file.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output filepath of the CSV file.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_csv</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Downloads an ee.FeatureCollection as a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the CSV file.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.csv'</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .csv'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_to_geojson">
<code class="highlight language-python">
ee_to_geojson<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts Earth Engine object to geojson.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>An Earth Engine object.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>GeoJSON object.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_geojson</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Converts Earth Engine object to geojson.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An Earth Engine object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: GeoJSON object.</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">featurecollection</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">json_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">out_json</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">)):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">))</span>
                <span class="n">geojson</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
                <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="n">dumps</span><span class="p">({</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"FeatureCollection"</span><span class="p">,</span> <span class="s2">"features"</span><span class="p">:</span> <span class="n">json_object</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
                <span class="n">geojson</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">json_object</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the Earth Engine object to geojson"</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_to_numpy">
<code class="highlight language-python">
ee_to_numpy<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>The image to sample.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None. </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>properties</code></td>
<td><code>list</code></td>
<td>
<p>The properties to copy over from the sampled image. Defaults to all non-system properties.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>default_value</code></td>
<td><code>float</code></td>
<td>
<p>A default value used when a sampled pixel is masked or outside a band's footprint. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>array</code></td>
<td>
<p>A 3D numpy array.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_numpy</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Extracts a rectangular region of pixels from an image into a 2D numpy array per band.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): The image to sample.</span>
<span class="sd">        bands (list, optional): The list of band names to extract. Please make sure that all bands have the same spatial resolution. Defaults to None. </span>
<span class="sd">        region (object, optional): The region whose projected bounding box is used to sample the image. The maximum number of pixels you can export is 262,144. Resampling and reprojecting all bands to a fixed scale can be useful. Defaults to the footprint in each band.</span>
<span class="sd">        properties (list, optional): The properties to copy over from the sampled image. Defaults to all non-system properties.</span>
<span class="sd">        default_value (float, optional): A default value used when a sampled pixel is masked or outside a band's footprint. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array: A 3D numpy array.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bands</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">band_arrs</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">sampleRectangle</span><span class="p">(</span>
            <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span> <span class="n">defaultValue</span><span class="o">=</span><span class="n">default_value</span><span class="p">)</span>
        <span class="n">band_values</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">band</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">:</span>
            <span class="n">band_arr</span> <span class="o">=</span> <span class="n">band_arrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">band_arr</span><span class="p">)</span>
            <span class="n">band_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">band_value</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">band_values</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.ee_to_shp">
<code class="highlight language-python">
ee_to_shp<span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Downloads an ee.FeatureCollection as a shapefile.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>filename</code></td>
<td><code>str</code></td>
<td>
<p>The output filepath of the shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>selectors</code></td>
<td><code>list</code></td>
<td>
<p>A list of attributes to export. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">ee_to_shp</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Downloads an ee.FeatureCollection as a shapefile.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): ee.FeatureCollection</span>
<span class="sd">        filename (str): The output filepath of the shapefile.</span>
<span class="sd">        selectors (list, optional): A list of attributes to export. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.shp'</span><span class="p">):</span>
            <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">ee_object</span><span class="o">=</span><span class="n">ee_object</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">selectors</span><span class="o">=</span><span class="n">selectors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'The filename must end with .shp'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.explode">
<code class="highlight language-python">
explode<span class="p">(</span><span class="n">coords</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Explode a GeoJSON geometry's coordinates object and yield
coordinate tuples. As long as the input is conforming, the type of
the geometry doesn't matter.  From Fiona 1.4.8</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">explode</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
    <span class="sd">"""Explode a GeoJSON geometry's coordinates object and yield</span>
<span class="sd">    coordinate tuples. As long as the input is conforming, the type of</span>
<span class="sd">    the geometry doesn't matter.  From Fiona 1.4.8"""</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">yield</span> <span class="n">coords</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">explode</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">f</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.extract_values_to_points">
<code class="highlight language-python">
extract_values_to_points<span class="p">(</span><span class="n">in_points</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts image values to points.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_points</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>label</code></td>
<td><code>str</code></td>
<td>
<p>The column name to keep.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>The image resolution to use. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span><span class="n">in_points</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Extracts image values to points.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_points (object): ee.FeatureCollection</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        label (str): The column name to keep.</span>
<span class="sd">        scale (float, optional): The image resolution to use. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">out_fc</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">sampleRegions</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'collection'</span><span class="p">:</span> <span class="n">in_points</span><span class="p">,</span>
        <span class="s1">'properties'</span><span class="p">:</span> <span class="p">[</span><span class="n">label</span><span class="p">],</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">out_fc</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.filter_HUC08">
<code class="highlight language-python">
filter_HUC08<span class="p">(</span><span class="n">region</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Filters HUC08 watersheds intersecting a given region.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>ee.Geometry</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter_HUC08</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
    <span class="sd">"""Filters HUC08 watersheds intersecting a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>

    <span class="n">USGS_HUC08</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s1">'USGS/WBD/2017/HUC08'</span><span class="p">)</span>   <span class="c1"># Subbasins</span>
    <span class="n">HUC08</span> <span class="o">=</span> <span class="n">USGS_HUC08</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HUC08</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.filter_HUC10">
<code class="highlight language-python">
filter_HUC10<span class="p">(</span><span class="n">region</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Filters HUC10 watersheds intersecting a given region.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>ee.Geometry</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter_HUC10</span><span class="p">(</span><span class="n">region</span><span class="p">):</span>
    <span class="sd">"""Filters HUC10 watersheds intersecting a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>

    <span class="n">USGS_HUC10</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s1">'USGS/WBD/2017/HUC10'</span><span class="p">)</span>   <span class="c1"># Watersheds</span>
    <span class="n">HUC10</span> <span class="o">=</span> <span class="n">USGS_HUC10</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HUC10</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.filter_NWI">
<code class="highlight language-python">
filter_NWI<span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrives NWI dataset for a given HUC8 watershed.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HUC08_Id</code></td>
<td><code>str</code></td>
<td>
<p>The HUC8 watershed id.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>ee.Geometry</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>exclude_riverine</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to exclude riverine wetlands. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Retrives NWI dataset for a given HUC8 watershed.</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC8 watershed id.</span>
<span class="sd">        region (object): ee.Geometry</span>
<span class="sd">        exclude_riverine (bool, optional): Whether to exclude riverine wetlands. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="n">nwi_asset_prefix</span> <span class="o">=</span> <span class="s1">'users/wqs/NWI-HU8/HU8_'</span>
    <span class="n">nwi_asset_suffix</span> <span class="o">=</span> <span class="s1">'_Wetlands'</span>
    <span class="n">nwi_asset_path</span> <span class="o">=</span> <span class="n">nwi_asset_prefix</span> <span class="o">+</span> <span class="n">HUC08_Id</span> <span class="o">+</span> <span class="n">nwi_asset_suffix</span>
    <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">nwi_asset_path</span><span class="p">)</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">exclude_riverine</span><span class="p">:</span>
        <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">nwi_huc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">notEquals</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'leftField'</span><span class="p">:</span> <span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'rightValue'</span><span class="p">:</span> <span class="s1">'Riverine'</span><span class="p">}))</span>
    <span class="k">return</span> <span class="n">nwi_huc</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.filter_polygons">
<code class="highlight language-python">
filter_polygons<span class="p">(</span><span class="n">ftr</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts GeometryCollection to Polygon/MultiPolygon</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ftr</code></td>
<td><code>object</code></td>
<td>
<p>ee.Feature</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Feature</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter_polygons</span><span class="p">(</span><span class="n">ftr</span><span class="p">):</span>
    <span class="sd">"""Converts GeometryCollection to Polygon/MultiPolygon</span>

<span class="sd">    Args:</span>
<span class="sd">        ftr (object): ee.Feature</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Feature</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">ftr</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">geometries</span><span class="p">()</span>
    <span class="n">geometries</span> <span class="o">=</span> <span class="n">geometries</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">geo</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">))</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'geoType'</span><span class="p">,</span>  <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo</span><span class="p">)</span><span class="o">.</span><span class="n">type</span><span class="p">()))</span>

    <span class="n">polygons</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geometries</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'geoType'</span><span class="p">,</span> <span class="s1">'Polygon'</span><span class="p">))</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">ftr</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.find_HUC08">
<code class="highlight language-python">
find_HUC08<span class="p">(</span><span class="n">HUC08_Id</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Finds a HUC08 watershed based on a given HUC08 ID</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HUC08_Id</code></td>
<td><code>str</code></td>
<td>
<p>The HUC08 ID.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_HUC08</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">):</span>
    <span class="sd">"""Finds a HUC08 watershed based on a given HUC08 ID</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC08 ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>

    <span class="n">USGS_HUC08</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s1">'USGS/WBD/2017/HUC08'</span><span class="p">)</span>   <span class="c1"># Subbasins</span>
    <span class="n">HUC08</span> <span class="o">=</span> <span class="n">USGS_HUC08</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'huc8'</span><span class="p">,</span> <span class="n">HUC08_Id</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">HUC08</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.find_HUC10">
<code class="highlight language-python">
find_HUC10<span class="p">(</span><span class="n">HUC10_Id</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Finds a HUC10 watershed based on a given HUC08 ID</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HUC10_Id</code></td>
<td><code>str</code></td>
<td>
<p>The HUC10 ID.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_HUC10</span><span class="p">(</span><span class="n">HUC10_Id</span><span class="p">):</span>
    <span class="sd">"""Finds a HUC10 watershed based on a given HUC08 ID</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC10_Id (str): The HUC10 ID.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>

    <span class="n">USGS_HUC10</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="s1">'USGS/WBD/2017/HUC10'</span><span class="p">)</span>   <span class="c1"># Watersheds</span>
    <span class="n">HUC10</span> <span class="o">=</span> <span class="n">USGS_HUC10</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'huc10'</span><span class="p">,</span> <span class="n">HUC10_Id</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">HUC10</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.find_landsat_by_path_row">
<code class="highlight language-python">
find_landsat_by_path_row<span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="n">path_num</span><span class="p">,</span> <span class="n">row_num</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Finds Landsat images by WRS path number and row number.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>landsat_col</code></td>
<td><code>str</code></td>
<td>
<p>The image collection id of Landsat. </p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>path_num</code></td>
<td><code>int</code></td>
<td>
<p>The WRS path number.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>row_num</code></td>
<td><code>int</code></td>
<td>
<p>the WRS row number.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.ImageCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_landsat_by_path_row</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="n">path_num</span><span class="p">,</span> <span class="n">row_num</span><span class="p">):</span>
    <span class="sd">"""Finds Landsat images by WRS path number and row number.</span>

<span class="sd">    Args:</span>
<span class="sd">        landsat_col (str): The image collection id of Landsat. </span>
<span class="sd">        path_num (int): The WRS path number.</span>
<span class="sd">        row_num (int): the WRS row number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">landsat_col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">landsat_col</span><span class="p">)</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="n">landsat_col</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WRS_PATH'</span><span class="p">,</span> <span class="n">path_num</span><span class="p">))</span> \
                <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WRS_ROW'</span><span class="p">,</span> <span class="n">row_num</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">collection</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.find_NAIP">
<code class="highlight language-python">
find_NAIP<span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">add_NDVI</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_NDWI</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Create annual NAIP mosaic for a given region.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>ee.Geometry</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>add_NDVI</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add the NDVI band. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>add_NDWI</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to add the NDWI band. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.ImageCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_NAIP</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">add_NDVI</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_NDWI</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Create annual NAIP mosaic for a given region.</span>

<span class="sd">    Args:</span>
<span class="sd">        region (object): ee.Geometry</span>
<span class="sd">        add_NDVI (bool, optional): Whether to add the NDVI band. Defaults to True.</span>
<span class="sd">        add_NDWI (bool, optional): Whether to add the NDWI band. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    """</span>

    <span class="n">init_collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">region</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="s1">'2009-01-01'</span><span class="p">,</span> <span class="s1">'2019-12-31'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">"system:band_names"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span>

    <span class="n">yearList</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">init_collection</span><span class="o">.</span><span class="n">distinct</span><span class="p">(</span>
        <span class="p">[</span><span class="s1">'system:time_start'</span><span class="p">])</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span>
    <span class="n">init_years</span> <span class="o">=</span> <span class="n">yearList</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'year'</span><span class="p">))</span>

    <span class="c1"># remove duplicates</span>
    <span class="n">init_years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">init_years</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">()))</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">init_years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="c1"># years = init_years.map(lambda x: x)</span>

    <span class="c1"># Available NAIP years with NIR band</span>
    <span class="k">def</span> <span class="nf">NAIPAnnual</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">init_collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="c1"># .filterBounds(geometry)</span>
        <span class="c1"># .filter(ee.Filter.listContains("system:band_names", "N"))</span>
        <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span>
        <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span>
        <span class="n">col_size</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">add_NDVI</span><span class="p">:</span>
            <span class="n">NDVI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
                <span class="p">[</span><span class="s1">'N'</span><span class="p">,</span> <span class="s1">'R'</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'nd'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'ndvi'</span><span class="p">])</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDVI</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_NDWI</span><span class="p">:</span>
            <span class="n">NDWI</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
                <span class="p">[</span><span class="s1">'G'</span><span class="p">,</span> <span class="s1">'N'</span><span class="p">])</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">'nd'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'ndwi'</span><span class="p">])</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">NDWI</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">time_start</span><span class="p">,</span> <span class="s1">'system:time_end'</span><span class="p">:</span> <span class="n">time_end</span><span class="p">,</span> <span class="s1">'tiles'</span><span class="p">:</span> <span class="n">col_size</span><span class="p">})</span>

    <span class="c1"># remove years with incomplete coverage</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">NAIPAnnual</span><span class="p">))</span>
    <span class="n">mean_size</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">aggregate_mean</span><span class="p">(</span><span class="s1">'tiles'</span><span class="p">))</span>
    <span class="n">total_sd</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">aggregate_total_sd</span><span class="p">(</span><span class="s1">'tiles'</span><span class="p">))</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="n">mean_size</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">total_sd</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">Or</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span>
        <span class="s1">'tiles'</span><span class="p">,</span> <span class="n">threshold</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="s1">'tiles'</span><span class="p">,</span> <span class="mi">15</span><span class="p">)))</span>
    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">gte</span><span class="p">(</span><span class="s1">'tiles'</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>

    <span class="n">naip_count</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
    <span class="n">naip_seq</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">naip_count</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_index</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">naip</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">naip_count</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'system:uid'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">toUint8</span><span class="p">()})</span>

    <span class="n">naip</span> <span class="o">=</span> <span class="n">naip_seq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_index</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.find_NWI">
<code class="highlight language-python">
find_NWI<span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Finds NWI dataset for a given HUC08 watershed.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HUC08_Id</code></td>
<td><code>str</code></td>
<td>
<p>The HUC08 watershed ID.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>exclude_riverine</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to exclude riverine wetlands. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">find_NWI</span><span class="p">(</span><span class="n">HUC08_Id</span><span class="p">,</span> <span class="n">exclude_riverine</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Finds NWI dataset for a given HUC08 watershed.</span>

<span class="sd">    Args:</span>
<span class="sd">        HUC08_Id (str): The HUC08 watershed ID.</span>
<span class="sd">        exclude_riverine (bool, optional): Whether to exclude riverine wetlands. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>

    <span class="n">nwi_asset_prefix</span> <span class="o">=</span> <span class="s1">'users/wqs/NWI-HU8/HU8_'</span>
    <span class="n">nwi_asset_suffix</span> <span class="o">=</span> <span class="s1">'_Wetlands'</span>
    <span class="n">nwi_asset_path</span> <span class="o">=</span> <span class="n">nwi_asset_prefix</span> <span class="o">+</span> <span class="n">HUC08_Id</span> <span class="o">+</span> <span class="n">nwi_asset_suffix</span>
    <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">nwi_asset_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">exclude_riverine</span><span class="p">:</span>
        <span class="n">nwi_huc</span> <span class="o">=</span> <span class="n">nwi_huc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">notEquals</span><span class="p">(</span>
            <span class="o">**</span><span class="p">{</span><span class="s1">'leftField'</span><span class="p">:</span> <span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'rightValue'</span><span class="p">:</span> <span class="s1">'Riverine'</span><span class="p">}))</span>
    <span class="k">return</span> <span class="n">nwi_huc</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.geojson_to_ee">
<code class="highlight language-python">
geojson_to_ee<span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a geojson to ee.Geometry()</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geo_json</code></td>
<td><code>dict</code></td>
<td>
<p>A geojson geometry dictionary or file path.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_object</code></td>
<td>
<p>An ee.Geometry object</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">geojson_to_ee</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Converts a geojson to ee.Geometry()</span>

<span class="sd">    Args:</span>
<span class="sd">        geo_json (dict): A geojson geometry dictionary or file path.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee_object: An ee.Geometry object</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="kn">import</span> <span class="nn">json</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geo_json</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">geo_json</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">geo_json</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">geo_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'FeatureCollection'</span><span class="p">:</span>
            <span class="n">features</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'features'</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">features</span>
        <span class="k">elif</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Feature'</span><span class="p">:</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'properties'</span><span class="p">][</span><span class="s1">'style'</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s1">'radius'</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>  <span class="c1"># Checks whether it is a circle</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">])</span>
                <span class="n">radius</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'properties'</span><span class="p">][</span><span class="s1">'style'</span><span class="p">][</span><span class="s1">'radius'</span><span class="p">]</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Point'</span><span class="p">:</span>  <span class="c1"># Checks whether it is a point</span>
                <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">]</span>
                <span class="n">longitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">latitude</span> <span class="o">=</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">longitude</span><span class="p">,</span> <span class="n">latitude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geo_json</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">],</span> <span class="s2">""</span><span class="p">,</span> <span class="n">geodesic</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">geom</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the geojson to ee.Geometry()"</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Could not convert the geojson to ee.Geometry()"</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_all_NAIP">
<code class="highlight language-python">
get_all_NAIP<span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates annual NAIP imagery mosaic.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>The starting year. Defaults to 2009.</p>
</td>
<td><code>2009</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>The ending year. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.ImageCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_all_NAIP</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">):</span>
    <span class="sd">"""Creates annual NAIP imagery mosaic.</span>

<span class="sd">    Args:</span>
<span class="sd">        start_year (int, optional): The starting year. Defaults to 2009.</span>
<span class="sd">        end_year (int, optional): The ending year. Defaults to 2019.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span>
                <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">"system:band_names"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">get_annual_NAIP</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_annual_NAIP">
<code class="highlight language-python">
get_annual_NAIP<span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">RGBN</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Filters NAIP ImageCollection by year.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>year</code></td>
<td><code>int</code></td>
<td>
<p>The year to filter the NAIP ImageCollection.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>RGBN</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to retrieve 4-band NAIP imagery only. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.ImageCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">RGBN</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Filters NAIP ImageCollection by year.</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int): The year to filter the NAIP ImageCollection.</span>
<span class="sd">        RGBN (bool, optional): Whether to retrieve 4-band NAIP imagery only. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.ImageCollection</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-01-01'</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-12-31'</span>
        <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">RGBN</span><span class="p">:</span>
            <span class="n">naip</span> <span class="o">=</span> <span class="n">naip</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span>
                <span class="s2">"system:band_names"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">naip</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_bounds">
<code class="highlight language-python">
get_bounds<span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Bounding box of a GeoJSON geometry, GeometryCollection, or FeatureCollection.
left, bottom, right, top
<em>not</em> xmin, ymin, xmax, ymax
If not north_up, y will be switched to guarantee the above.
Source code adapted from https://github.com/mapbox/rasterio/blob/master/rasterio/features.py#L361</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Bounding box of a GeoJSON geometry, GeometryCollection, or FeatureCollection.</span>
<span class="sd">    left, bottom, right, top</span>
<span class="sd">    *not* xmin, ymin, xmax, ymax</span>
<span class="sd">    If not north_up, y will be switched to guarantee the above.</span>
<span class="sd">    Source code adapted from https://github.com/mapbox/rasterio/blob/master/rasterio/features.py#L361</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="s1">'bbox'</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s1">'bbox'</span><span class="p">])</span>

    <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'geometry'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">geometry</span><br/>
<span class="c1"># geometry must be a geometry, GeometryCollection, or FeatureCollection</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">'coordinates'</span> <span class="ow">in</span> <span class="n">geometry</span> <span class="ow">or</span> <span class="s1">'geometries'</span> <span class="ow">in</span> <span class="n">geometry</span> <span class="ow">or</span> <span class="s1">'features'</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"geometry must be a GeoJSON-like geometry, GeometryCollection, "</span>
            <span class="s2">"or FeatureCollection"</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="s1">'features'</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a FeatureCollection</span>
        <span class="n">xmins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xmaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">[</span><span class="s1">'features'</span><span class="p">]:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">feature</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">])</span>
            <span class="n">xmins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">ymins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">xmaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span>

    <span class="k">elif</span> <span class="s1">'geometries'</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a geometry collection</span>
        <span class="n">xmins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xmaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ymaxs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">geometry</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">[</span><span class="s1">'geometries'</span><span class="p">]:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
            <span class="n">xmins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">ymins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">xmaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymaxs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmins</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymaxs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmaxs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymins</span><span class="p">)</span>

    <span class="k">elif</span> <span class="s1">'coordinates'</span> <span class="ow">in</span> <span class="n">geometry</span><span class="p">:</span>
        <span class="c1"># Input is a singular geometry object</span>
        <span class="k">if</span> <span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">explode</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">]))</span>
            <span class="n">xyz_px</span> <span class="o">=</span> <span class="p">[</span><span class="n">transform</span> <span class="o">*</span> <span class="n">point</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">xyz</span><span class="p">]</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">xyz_px</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="n">explode</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">]))))</span>
            <span class="k">if</span> <span class="n">north_up</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># all valid inputs returned above, so whatever falls through is an error</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"geometry must be a GeoJSON-like geometry, GeometryCollection, "</span>
            <span class="s2">"or FeatureCollection"</span>
        <span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_center">
<code class="highlight language-python">
get_center<span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get the centroid of a GeoJSON.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geometry</code></td>
<td><code>dict</code></td>
<td>
<p>A GeoJSON dict.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>north_up</code></td>
<td><code>bool</code></td>
<td>
<p>. Defaults to True.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>transform</code></td>
<td><code>[type]</code></td>
<td>
<p>. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>[lon, lat]</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_center</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Get the centroid of a GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        geometry (dict): A GeoJSON dict.</span>
<span class="sd">        north_up (bool, optional): . Defaults to True.</span>
<span class="sd">        transform ([type], optional): . Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: [lon, lat]</span>
<span class="sd">    """</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">get_bounds</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">north_up</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span>
    <span class="n">center</span><span class="o">=</span><span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lat, lon)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_COG_bands">
<code class="highlight language-python">
get_COG_bands<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get band names of a Cloud Optimized GeoTIFF (COG).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>A list of band names</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_COG_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get band names of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of band names</span>
<span class="sd">    """</span>  <br/>
<span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/info"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">r</span><span class="p">[</span><span class="s1">'band_descriptions'</span><span class="p">]]</span>
    <span class="k">return</span> <span class="n">bands</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_COG_bounds">
<code class="highlight language-python">
get_COG_bounds<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get the bounding box of a Cloud Optimized GeoTIFF (COG).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>A list of values representing [left, bottom, right, top]</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_COG_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get the bounding box of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of values representing [left, bottom, right, top]</span>
<span class="sd">    """</span>  <br/>
<span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/bounds"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span>
        <span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <br/>
<span class="n">bounds</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">"bounds"</span><span class="p">]</span> 
    <span class="k">return</span> <span class="n">bounds</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_COG_center">
<code class="highlight language-python">
get_COG_center<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get the centroid of a Cloud Optimized GeoTIFF (COG).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>A tuple representing (longitude, latitude)</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_COG_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get the centroid of a Cloud Optimized GeoTIFF (COG).</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple representing (longitude, latitude)</span>
<span class="sd">    """</span>  <br/>
<span class="n">bounds</span> <span class="o">=</span> <span class="n">get_COG_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">center</span><span class="o">=</span><span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lat, lon)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_COG_tile">
<code class="highlight language-python">
get_COG_tile<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get a tile layer from a Cloud Optimized GeoTIFF (COG).
    Source code adapted from https://developmentseed.org/titiler/examples/Working_with_CloudOptimizedGeoTIFF_simple/</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns the COG Tile layer URL and bounds. </p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_COG_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Get a tile layer from a Cloud Optimized GeoTIFF (COG).</span>
<span class="sd">        Source code adapted from https://developmentseed.org/titiler/examples/Working_with_CloudOptimizedGeoTIFF_simple/</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a COG, e.g., https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns the COG Tile layer URL and bounds. </span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>

    <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s1">'WebMercatorQuad'</span>
    <span class="k">if</span> <span class="s2">"TileMatrixSetId"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"TileMatrixSetId"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"tile_format"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"tile_format"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"tile_format"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"tile_scale"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"tile_scale"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"tile_scale"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"minzoom"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"minzoom"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"minzoom"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"maxzoom"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"maxzoom"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"maxzoom"</span><span class="p">]</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/cog/</span><span class="si">{</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="s2">"tiles"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_STAC_bands">
<code class="highlight language-python">
get_STAC_bands<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get band names of a single SpatialTemporal Asset Catalog (STAC) item.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>A list of band names</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_STAC_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get band names of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of band names</span>
<span class="sd">    """</span>  <br/>
<span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/info"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_STAC_bounds">
<code class="highlight language-python">
get_STAC_bounds<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get the bounding box of a single SpatialTemporal Asset Catalog (STAC) item.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>A list of values representing [left, bottom, right, top]</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_STAC_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get the bounding box of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of values representing [left, bottom, right, top]</span>
<span class="sd">    """</span>  <br/>
<span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/bounds"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span>
        <span class="p">}</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <br/>
<span class="n">bounds</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="s2">"bounds"</span><span class="p">]</span> 
    <span class="k">return</span> <span class="n">bounds</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_STAC_center">
<code class="highlight language-python">
get_STAC_center<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get the centroid of a single SpatialTemporal Asset Catalog (STAC) item.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>A tuple representing (longitude, latitude)</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_STAC_center</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">):</span>
    <span class="sd">"""Get the centroid of a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple representing (longitude, latitude)</span>
<span class="sd">    """</span>  <br/>
<span class="n">bounds</span> <span class="o">=</span> <span class="n">get_STAC_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="n">center</span><span class="o">=</span><span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># (lat, lon)</span>
    <span class="k">return</span> <span class="n">center</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.get_STAC_tile">
<code class="highlight language-python">
get_STAC_tile<span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s1">'https://api.cogeo.xyz/'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Get a tile layer from a single SpatialTemporal Asset Catalog (STAC) item.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>titiler_endpoint</code></td>
<td><code>str</code></td>
<td>
<p>Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</p>
</td>
<td><code>'https://api.cogeo.xyz/'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns the COG Tile layer URL and bounds. </p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_STAC_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="s2">"https://api.cogeo.xyz/"</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Get a tile layer from a single SpatialTemporal Asset Catalog (STAC) item.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to "https://api.cogeo.xyz/".</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns the COG Tile layer URL and bounds. </span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"url"</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>

    <span class="n">TileMatrixSetId</span><span class="o">=</span><span class="s1">'WebMercatorQuad'</span>
    <span class="k">if</span> <span class="s2">"TileMatrixSetId"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">TileMatrixSetId</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"TileMatrixSetId"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"expression"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"expression"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"expression"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"tile_format"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"tile_format"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"tile_format"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"tile_scale"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"tile_scale"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"tile_scale"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"minzoom"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"minzoom"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"minzoom"</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">"maxzoom"</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">params</span><span class="p">[</span><span class="s2">"maxzoom"</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">"maxzoom"</span><span class="p">]</span>

    <span class="n">allowed_bands</span> <span class="o">=</span> <span class="n">get_STAC_bands</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bands</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="n">allowed_bands</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_bands</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'You can only select 3 bands from the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_bands</span><span class="p">)))</span> 

    <span class="n">assets</span> <span class="o">=</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span>
    <span class="n">params</span><span class="p">[</span><span class="s2">"assets"</span><span class="p">]</span> <span class="o">=</span> <span class="n">assets</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">titiler_endpoint</span><span class="si">}</span><span class="s2">/stac/</span><span class="si">{</span><span class="n">TileMatrixSetId</span><span class="si">}</span><span class="s2">/tilejson.json"</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
    <span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">r</span><span class="p">[</span><span class="s2">"tiles"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.hex_to_rgb">
<code class="highlight language-python">
hex_to_rgb<span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">'FFFFFF'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts hex color to RGB color. </p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>value</code></td>
<td><code>str</code></td>
<td>
<p>Hex color code as a string. Defaults to 'FFFFFF'.</p>
</td>
<td><code>'FFFFFF'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>RGB color as a tuple.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">hex_to_rgb</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">'FFFFFF'</span><span class="p">):</span>
    <span class="sd">"""Converts hex color to RGB color. </span>

<span class="sd">    Args:</span>
<span class="sd">        value (str, optional): Hex color code as a string. Defaults to 'FFFFFF'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: RGB color as a tuple.</span>
<span class="sd">    """</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">'#'</span><span class="p">)</span>
    <span class="n">lv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">lv</span><span class="o">//</span><span class="mi">3</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lv</span><span class="p">,</span> <span class="n">lv</span><span class="o">//</span><span class="mi">3</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_area">
<code class="highlight language-python">
image_area<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculates the the area of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>denominator</code></td>
<td><code>float</code></td>
<td>
<p>The denominator to use for converting size from square meters to other units. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Dictionary</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_area</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Calculates the the area of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        denominator (float, optional): The denominator to use for converting size from square meters to other units. Defaults to 1.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Dictionary</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">pixel_area</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">unmask</span><span class="p">()</span><span class="o">.</span><span class="n">neq</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">())</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span>
    <span class="n">img_area</span> <span class="o">=</span> <span class="n">pixel_area</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">img_area</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_band_names">
<code class="highlight language-python">
image_band_names<span class="p">(</span><span class="n">img</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets image band names.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>ee.Image</code></td>
<td>
<p>The input image.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.List</code></td>
<td>
<p>The returned list of image band names.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_band_names</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">"""Gets image band names.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.List: The returned list of image band names.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_cell_size">
<code class="highlight language-python">
image_cell_size<span class="p">(</span><span class="n">img</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the image cell size (e.g., spatial resolution)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>The nominal scale in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_cell_size</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">"""Retrieves the image cell size (e.g., spatial resolution)</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The nominal scale in meters.</span>
<span class="sd">    """</span>
    <span class="n">bands</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">())</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">scales</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">bands</span><span class="o">.</span><span class="n">getInfo</span><span class="p">(),</span> <span class="n">scales</span><span class="p">),</span> <span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">scale</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_date">
<code class="highlight language-python">
image_date<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the image acquisition date.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>date_format</code></td>
<td><code>str</code></td>
<td>
<p>The date format to use. Defaults to 'YYYY-MM-dd'.</p>
</td>
<td><code>'YYYY-MM-dd'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A string representing the acquisition of the image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_date</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">):</span>
    <span class="sd">"""Retrieves the image acquisition date.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>
<span class="sd">        date_format (str, optional): The date format to use. Defaults to 'YYYY-MM-dd'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string representing the acquisition of the image.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_max_value">
<code class="highlight language-python">
image_max_value<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the maximum value of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to calculate the maximum value.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Retrieves the maximum value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the maximum value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">max_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">max_value</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_mean_value">
<code class="highlight language-python">
image_mean_value<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the mean value of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to calculate the mean value.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Retrieves the mean value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the mean value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">mean_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">mean_value</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_min_value">
<code class="highlight language-python">
image_min_value<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the minimum value of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to calculate the minimum value.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Retrieves the minimum value of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the minimum value.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">min_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">min_value</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_props">
<code class="highlight language-python">
image_props<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets image properties.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>ee.Image</code></td>
<td>
<p>The input image.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>date_format</code></td>
<td><code>str</code></td>
<td>
<p>The output date format. Defaults to 'YYYY-MM-dd HH:mm:ss'.</p>
</td>
<td><code>'YYYY-MM-dd'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dd.Dictionary</code></td>
<td>
<p>The dictionary containing image properties.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_props</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">'YYYY-MM-dd'</span><span class="p">):</span>
    <span class="sd">"""Gets image properties.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image.</span>
<span class="sd">        date_format (str, optional): The output date format. Defaults to 'YYYY-MM-dd HH:mm:ss'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dd.Dictionary: The dictionary containing image properties.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input object must be an ee.Image'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">'system:footprint'</span><span class="p">)</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">'system:bands'</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">keys</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
    <span class="n">scales</span> <span class="o">=</span> <span class="n">bands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">])</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">())</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">scales</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span>
        <span class="mi">1</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">bands</span><span class="o">.</span><span class="n">getInfo</span><span class="p">(),</span> <span class="n">scales</span><span class="p">),</span> <span class="n">scales</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">image_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span>
    <span class="n">time_start</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">)</span>
                         <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd HH:mm:ss'</span><span class="p">)</span>
    <span class="c1"># time_end = ee.Date(img.get('system:time_end')).format('YYYY-MM-dd HH:mm:ss')</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">())</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span>
        <span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">'YYYY-MM-dd HH:mm:ss'</span><span class="p">),</span> <span class="n">time_start</span><span class="p">)</span>
    <span class="n">asset_size</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'system:asset_size'</span><span class="p">))</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span>
        <span class="mf">1e6</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">()</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">' MB'</span><span class="p">))</span>

    <span class="n">props</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:time_start'</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:time_end'</span><span class="p">,</span> <span class="n">time_end</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'system:asset_size'</span><span class="p">,</span> <span class="n">asset_size</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'NOMINAL_SCALE'</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'IMAGE_DATE'</span><span class="p">,</span> <span class="n">image_date</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">props</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_reclassify">
<code class="highlight language-python">
image_reclassify<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Reclassify an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to which the remapping is applied.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_list</code></td>
<td><code>list</code></td>
<td>
<p>The source values (numbers or EEArrays). All values in this list will be mapped to the corresponding value in 'out_list'.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_list</code></td>
<td><code>list</code></td>
<td>
<p>The destination values (numbers or EEArrays). These are used to replace the corresponding values in 'from'. Must have the same number of values as 'in_list'.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_reclassify</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">):</span>
    <span class="sd">"""Reclassify an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to which the remapping is applied.</span>
<span class="sd">        in_list (list): The source values (numbers or EEArrays). All values in this list will be mapped to the corresponding value in 'out_list'.</span>
<span class="sd">        out_list (list): The destination values (numbers or EEArrays). These are used to replace the corresponding values in 'from'. Must have the same number of values as 'in_list'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    """</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">remap</span><span class="p">(</span><span class="n">in_list</span><span class="p">,</span> <span class="n">out_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_scale">
<code class="highlight language-python">
image_scale<span class="p">(</span><span class="n">img</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the image cell size (e.g., spatial resolution)</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>The nominal scale in meters.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
    <span class="sd">"""Retrieves the image cell size (e.g., spatial resolution)</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): ee.Image</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The nominal scale in meters.</span>
<span class="sd">    """</span>
    <span class="c1"># bands = img.bandNames()</span>
    <span class="c1"># scales = bands.map(lambda b: img.select([b]).projection().nominalScale())</span>
    <span class="c1"># scale = ee.Algorithms.If(scales.distinct().size().gt(1), ee.Dictionary.fromLists(bands.getInfo(), scales), scales.get(0))</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_smoothing">
<code class="highlight language-python">
image_smoothing<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">reducer</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Smooths an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to be smoothed.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>reducer</code></td>
<td><code>object</code></td>
<td>
<p>ee.Reducer</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>kernel</code></td>
<td><code>object</code></td>
<td>
<p>ee.Kernel</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_smoothing</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">reducer</span><span class="p">,</span> <span class="n">kernel</span><span class="p">):</span>
    <span class="sd">"""Smooths an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to be smoothed.</span>
<span class="sd">        reducer (object): ee.Reducer</span>
<span class="sd">        kernel (object): ee.Kernel</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    """</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceNeighborhood</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">reducer</span><span class="p">,</span>
        <span class="s1">'kernel'</span><span class="p">:</span> <span class="n">kernel</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">image</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_stats">
<code class="highlight language-python">
image_stats<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets image descriptive statistics.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>ee.Image</code></td>
<td>
<p>The input image to calculate descriptive statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.Dictionary</code></td>
<td>
<p>A dictionary containing the description statistics of the input image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_stats</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Gets image descriptive statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (ee.Image): The input image to calculate descriptive statistics.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Dictionary: A dictionary containing the description statistics of the input image.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input object must be an ee.Image'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">stat_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">,</span> <span class="s1">'mean'</span><span class="p">,</span> <span class="s1">'std'</span><span class="p">,</span> <span class="s1">'sum'</span><span class="p">]</span>

    <span class="n">image_min</span> <span class="o">=</span> <span class="n">image_min_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_max</span> <span class="o">=</span> <span class="n">image_max_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_mean</span> <span class="o">=</span> <span class="n">image_mean_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_std</span> <span class="o">=</span> <span class="n">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
    <span class="n">image_sum</span> <span class="o">=</span> <span class="n">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

    <span class="n">stat_results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span>
        <span class="p">[</span><span class="n">image_min</span><span class="p">,</span> <span class="n">image_max</span><span class="p">,</span> <span class="n">image_mean</span><span class="p">,</span> <span class="n">image_std</span><span class="p">,</span> <span class="n">image_sum</span><span class="p">])</span>

    <span class="n">stats</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">stat_types</span><span class="p">,</span> <span class="n">stat_results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">stats</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_std_value">
<code class="highlight language-python">
image_std_value<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the standard deviation of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to calculate the standard deviation.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_std_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Retrieves the standard deviation of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the standard deviation.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">std_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">std_value</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.image_sum_value">
<code class="highlight language-python">
image_sum_value<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Retrieves the sum of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to calculate the standard deviation.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>region</code></td>
<td><code>object</code></td>
<td>
<p>The region over which to reduce data. Defaults to the footprint of the image's first band.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">image_sum_value</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Retrieves the sum of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to calculate the standard deviation.</span>
<span class="sd">        region (object, optional): The region over which to reduce data. Defaults to the footprint of the image's first band.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">image_scale</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="n">sum_value</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'geometry'</span><span class="p">:</span> <span class="n">region</span><span class="p">,</span>
        <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span><span class="p">,</span>
        <span class="s1">'maxPixels'</span><span class="p">:</span> <span class="mf">1e12</span>
    <span class="p">})</span>
    <span class="k">return</span> <span class="n">sum_value</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.in_colab_shell">
<code class="highlight language-python">
in_colab_shell<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Tests if the code is being executed within Google Colab.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">in_colab_shell</span><span class="p">():</span>
    <span class="sd">"""Tests if the code is being executed within Google Colab."""</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">google.colab</span>  <span class="c1"># pylint: disable=unused-variable</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.install_from_github">
<code class="highlight language-python">
install_from_github<span class="p">(</span><span class="n">url</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Install a package from a GitHub repository.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>str</code></td>
<td>
<p>The URL of the GitHub repository.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">install_from_github</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">"""Install a package from a GitHub repository.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the GitHub repository.</span>
<span class="sd">    """</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">repo_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">zip_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">'archive/master.zip'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'-master.zip'</span>
        <span class="n">download_from_url</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">zip_url</span><span class="p">,</span> <span class="n">out_file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                          <span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="n">repo_name</span> <span class="o">+</span> <span class="s1">'-master'</span><span class="p">)</span>
        <span class="n">pkg_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Installing </span><span class="si">{}</span><span class="s1">...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">))</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip install .'</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> has been installed successfully.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pkg_name</span><span class="p">))</span>
        <span class="c1"># print("\nPlease comment out 'install_from_github()' and restart the kernel to take effect:\nJupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output")</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.is_drive_mounted">
<code class="highlight language-python">
is_drive_mounted<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether Google Drive is mounted in Google Colab.</p>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if Google Drive is mounted, False otherwise.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_drive_mounted</span><span class="p">():</span>
    <span class="sd">"""Checks whether Google Drive is mounted in Google Colab.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if Google Drive is mounted, False otherwise.</span>
<span class="sd">    """</span>
    <span class="n">drive_path</span> <span class="o">=</span> <span class="s1">'/content/drive/My Drive'</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">drive_path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.is_latlon_valid">
<code class="highlight language-python">
is_latlon_valid<span class="p">(</span><span class="n">location</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Checks whether a pair of coordinates is valid.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location</code></td>
<td><code>str</code></td>
<td>
<p>A pair of latlon coordinates separated by comma or space.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns True if valid.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_latlon_valid</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">"""Checks whether a pair of coordinates is valid.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns True if valid.</span>
<span class="sd">    """</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="s1">','</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="s1">' '</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s1">'The coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.is_tool">
<code class="highlight language-python">
is_tool<span class="p">(</span><span class="n">name</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Check whether <code>name</code> is on PATH and marked as executable.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_tool</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">"""Check whether `name` is on PATH and marked as executable."""</span>

    <span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">which</span>

    <span class="k">return</span> <span class="n">which</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.landsat_timeseries">
<code class="highlight language-python">
landsat_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates an annual Landsat ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2020.</p>
</td>
<td><code>2020</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Returns an ImageCollection containing annual Landsat images.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Generates an annual Landsat ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2020.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Returns an ImageCollection containing annual Landsat images.</span>
<span class="sd">    """</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Input and output parameters.</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">datetime</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Setup vars to get dates.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&gt;=</span> <span class="mi">1984</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&lt;</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start year must be an integer &gt;= 1984.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&gt;</span> <span class="mi">1984</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The end year must be an integer &lt;= 2020.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start date and end date must be month-day, such as 06-10, 09-20'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input dates are invalid.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">days_between</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d2</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">((</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>

    <span class="n">n_days</span> <span class="o">=</span> <span class="n">days_between</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span><span class="p">,</span>
                          <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="n">start_month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">start_day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span>

    <span class="c1"># # Define a collection filter by date, bounds, and quality.</span>
    <span class="c1"># def colFilter(col, aoi):  # , startDate, endDate):</span>
    <span class="c1">#     return(col.filterBounds(aoi))</span>

    <span class="c1"># Landsat collection preprocessingEnabled</span>
    <span class="c1"># Get Landsat surface reflectance collections for OLI, ETM+ and TM sensors.</span>
    <span class="n">LC08col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LC08/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LE07col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LE07/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LT05col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LT05/C01/T1_SR'</span><span class="p">)</span>
    <span class="n">LT04col</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'LANDSAT/LT04/C01/T1_SR'</span><span class="p">)</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span>
               <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
               <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">))</span>
        <span class="c1"># .filter('CLOUD_COVER &lt; 5')</span>
        <span class="c1"># .filter('GEOMETRIC_RMSE_MODEL &lt; 15')</span>
        <span class="c1"># .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))</span>

    <span class="c1"># Function to get and rename bands of interest from OLI.</span>
    <span class="k">def</span> <span class="nf">renameOli</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B6'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]))</span>

    <span class="c1"># Function to get and rename bands of interest from ETM+.</span>
    <span class="k">def</span> <span class="nf">renameEtm</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B1'</span><span class="p">,</span> <span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]))</span>

    <span class="c1"># Add NBR for LandTrendr segmentation.</span>
    <span class="k">def</span> <span class="nf">calcNbr</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">])</span>
                            <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">'NBR'</span><span class="p">))</span><span class="o">.</span><span class="n">int16</span><span class="p">())</span>

    <span class="c1"># Define function to mask out clouds and cloud shadows in images.</span>
    <span class="c1"># Use CFmask band included in USGS Landsat SR image product.</span>
    <span class="k">def</span> <span class="nf">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">cloudShadowBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span>
        <span class="n">cloudsBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span>
        <span class="n">qa</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'pixel_qa'</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudShadowBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudsBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>

    <span class="c1"># Define function to prepare OLI images.</span>
    <span class="k">def</span> <span class="nf">prepOli</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameOli</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apply_fmask</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
                <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Define function to prepare ETM+ images.</span>
    <span class="k">def</span> <span class="nf">prepEtm</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameEtm</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">apply_fmask</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
               <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Get annual median collection.</span>
    <span class="k">def</span> <span class="nf">getAnnualComp</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">startDate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_month</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_day</span><span class="p">))</span>
        <span class="n">endDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">n_days</span><span class="p">),</span> <span class="s1">'day'</span><span class="p">)</span>

        <span class="c1"># Filter collections and prepare them for merging.</span>
        <span class="n">LC08coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LC08col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepOli</span><span class="p">)</span>
        <span class="n">LE07coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LE07col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>
        <span class="n">LT05coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LT05col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>
        <span class="n">LT04coly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">LT04col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepEtm</span><span class="p">)</span>

        <span class="c1"># Merge the collections.</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">LC08coly</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LE07coly</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LT05coly</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">LT04coly</span><span class="p">)</span>

        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">nBands</span> <span class="o">=</span> <span class="n">yearImg</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
            <span class="n">nBands</span><span class="p">,</span>
            <span class="n">yearImg</span><span class="p">,</span>
            <span class="n">dummyImg</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">calcNbr</span><span class="p">(</span><span class="n">yearImg</span><span class="p">)</span>
               <span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'year'</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">startDate</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span> <span class="s1">'nBands'</span><span class="p">:</span> <span class="n">nBands</span><span class="p">}))</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Make a dummy image for missing years.</span>
    <span class="n">bandNames</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">([</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span>
                         <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">])</span>
    <span class="n">fillerValues</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bandNames</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
    <span class="n">dummyImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">fillerValues</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">bandNames</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">int16</span><span class="p">()</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Get a list of years</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Make list of annual image composites.</span>
    <span class="n">imgList</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">getAnnualComp</span><span class="p">)</span>

    <span class="c1"># Convert image composite list to collection</span>
    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="o">.</span><span class="n">fromImages</span><span class="p">(</span><span class="n">imgList</span><span class="p">)</span>

    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">imgCol</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span>
        <span class="n">roi</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'coordinates'</span><span class="p">:</span> <span class="n">roi</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()}))</span>

    <span class="k">return</span> <span class="n">imgCol</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.landsat_ts_gif">
<code class="highlight language-python">
landsat_ts_gif<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">])</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates a Landsat timelapse GIF image. This function is adapted from https://emaprlab.users.earthengine.app/view/lt-gee-time-series-animator. A huge thank you to Justin Braaten for sharing his fantastic work.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 1984.</p>
</td>
<td><code>1984</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p>
</td>
<td><code>'06-10'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p>
</td>
<td><code>'09-20'</code></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</p>
</td>
<td><code>['NIR', 'Red', 'Green']</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>apply_fmask</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p>
</td>
<td><code>True</code></td>
</tr>
<tr>
<td><code>nd_bands</code></td>
<td><code>list</code></td>
<td>
<p>A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first ‚àí second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>nd_threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold for extacting pixels from the normalized difference band. </p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>nd_palette</code></td>
<td><code>list</code></td>
<td>
<p>The color palette to use for displaying the normalized difference band. </p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>File path to the output GIF image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_gif</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'06-10'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'09-20'</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">]):</span>
    <span class="sd">"""Generates a Landsat timelapse GIF image. This function is adapted from https://emaprlab.users.earthengine.app/view/lt-gee-time-series-animator. A huge thank you to Justin Braaten for sharing his fantastic work.</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</span>
<span class="sd">        bands (list, optional): Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">        nd_bands (list, optional): A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first ‚àí second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).  </span>
<span class="sd">        nd_threshold (float, optional): The threshold for extacting pixels from the normalized difference band. </span>
<span class="sd">        nd_palette (list, optional): The color palette to use for displaying the normalized difference band. </span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path to the output GIF image.</span>
<span class="sd">    """</span>

    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The provided roi is invalid. It must be an ee.Geometry'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">out_gif</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">'landsat_ts_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.gif'</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The output file must end with .gif'</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># elif not os.path.isfile(out_gif):</span>
    <span class="c1">#     print('The output file must be a file')</span>
    <span class="c1">#     return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_gif</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span>
                     <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'pixel_qa'</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_bands</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bands</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'You can only select 3 bands from the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_bands</span><span class="p">)))</span>

    <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nd_bands</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">x</span> <span class="ow">in</span> <span class="n">allowed_bands</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nd_bands</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'You can only select two bands from the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_bands</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">landsat_timeseries</span><span class="p">(</span>
            <span class="n">roi</span><span class="p">,</span> <span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'min'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'max'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4000</span>
            <span class="n">vis_params</span><span class="p">[</span><span class="s1">'gamma'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">video_args</span> <span class="o">=</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'dimensions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'framesPerSecond'</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_second</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'EPSG:3857'</span>

        <span class="k">if</span> <span class="s1">'bands'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>

        <span class="k">if</span> <span class="s1">'min'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'min'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="s1">'max'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'max'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4000</span>

        <span class="k">if</span> <span class="s1">'gamma'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">video_args</span><span class="p">[</span><span class="s1">'gamma'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">download_ee_video</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nd_images</span> <span class="o">=</span> <span class="n">landsat_ts_norm_diff</span><span class="p">(</span>
                <span class="n">col</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">)</span>
            <span class="n">out_nd_gif</span> <span class="o">=</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">,</span> <span class="s1">'_nd.gif'</span><span class="p">)</span>
            <span class="n">landsat_ts_norm_diff_gif</span><span class="p">(</span><span class="n">nd_images</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="n">out_nd_gif</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                     <span class="n">palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">out_gif</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.landsat_ts_norm_diff">
<code class="highlight language-python">
landsat_ts_norm_diff<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Computes a normalized difference index based on a Landsat timeseries.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>ee.ImageCollection</code></td>
<td>
<p>A Landsat timeseries.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>bands</code></td>
<td><code>list</code></td>
<td>
<p>The bands to use for computing normalized difference. Defaults to ['Green', 'SWIR1'].</p>
</td>
<td><code>['Green', 'SWIR1']</code></td>
</tr>
<tr>
<td><code>threshold</code></td>
<td><code>float</code></td>
<td>
<p>The threshold to extract features. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.ImageCollection</code></td>
<td>
<p>An ImageCollection containing images with values greater than the specified threshold. </p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_norm_diff</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">],</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">"""Computes a normalized difference index based on a Landsat timeseries.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): A Landsat timeseries.</span>
<span class="sd">        bands (list, optional): The bands to use for computing normalized difference. Defaults to ['Green', 'SWIR1'].</span>
<span class="sd">        threshold (float, optional): The threshold to extract features. Defaults to 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.ImageCollection: An ImageCollection containing images with values greater than the specified threshold. </span>
<span class="sd">    """</span>
    <span class="n">nd_images</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">(</span>
        <span class="n">bands</span><span class="p">)</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
    <span class="k">return</span> <span class="n">nd_images</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.landsat_ts_norm_diff_gif">
<code class="highlight language-python">
landsat_ts_norm_diff_gif<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>[summary]</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>ee.ImageCollection</code></td>
<td>
<p>The normalized difference Landsat timeseires.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_gif</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>vis_params</code></td>
<td><code>dict</code></td>
<td>
<p>Visualization parameters. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>palette</code></td>
<td><code>list</code></td>
<td>
<p>The palette to use for visualizing the timelapse. Defaults to ['black', 'blue']. The first color in the list is the background color.</p>
</td>
<td><code>['black', 'blue']</code></td>
</tr>
<tr>
<td><code>dimensions</code></td>
<td><code>int</code></td>
<td>
<p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p>
</td>
<td><code>768</code></td>
</tr>
<tr>
<td><code>frames_per_second</code></td>
<td><code>int</code></td>
<td>
<p>Animation speed. Defaults to 10.</p>
</td>
<td><code>10</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>File path to the output animated GIF.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">landsat_ts_norm_diff_gif</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[</span><span class="s1">'black'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">],</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="sd">"""[summary]</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (ee.ImageCollection): The normalized difference Landsat timeseires.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        palette (list, optional): The palette to use for visualizing the timelapse. Defaults to ['black', 'blue']. The first color in the list is the background color.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: File path to the output animated GIF.</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'coordinates'</span><span class="p">)</span>
    <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">out_gif</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">'landsat_ts_nd_'</span> <span class="o">+</span> <span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'.gif'</span>
        <span class="n">out_gif</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">out_gif</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.gif'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'The output file must end with .gif'</span><span class="p">)</span>

    <span class="n">bands</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'nd'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vis_params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>
        <span class="n">vis_params</span><span class="p">[</span><span class="s1">'palette'</span><span class="p">]</span> <span class="o">=</span> <span class="n">palette</span>

    <span class="n">video_args</span> <span class="o">=</span> <span class="n">vis_params</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'dimensions'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dimensions</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'region'</span><span class="p">]</span> <span class="o">=</span> <span class="n">roi</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'framesPerSecond'</span><span class="p">]</span> <span class="o">=</span> <span class="n">frames_per_second</span>
    <span class="n">video_args</span><span class="p">[</span><span class="s1">'crs'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'EPSG:3857'</span>

    <span class="k">if</span> <span class="s1">'bands'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">video_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">video_args</span><span class="p">[</span><span class="s1">'bands'</span><span class="p">]</span> <span class="o">=</span> <span class="n">bands</span>

    <span class="n">download_ee_video</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">video_args</span><span class="p">,</span> <span class="n">out_gif</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out_gif</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.latlon_from_text">
<code class="highlight language-python">
latlon_from_text<span class="p">(</span><span class="n">location</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extracts latlon from text.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>location</code></td>
<td><code>str</code></td>
<td>
<p>A pair of latlon coordinates separated by comma or space.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bool</code></td>
<td>
<p>Returns (lat, lon) if valid.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">latlon_from_text</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">"""Extracts latlon from text.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (str): A pair of latlon coordinates separated by comma or space.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: Returns (lat, lon) if valid.</span>
<span class="sd">    """</span>
    <span class="n">latlon</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">','</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="s1">' '</span> <span class="ow">in</span> <span class="n">location</span><span class="p">:</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lat</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">90</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">90</span> <span class="ow">and</span> <span class="n">lon</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">180</span> <span class="ow">and</span> <span class="n">lat</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The lat-lon coordinates should be numbers only and separated by comma or space, such as 40.2, -100.3'</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.legend_from_ee">
<code class="highlight language-python">
legend_from_ee<span class="p">(</span><span class="n">ee_class_table</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page
such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</p>
<p>Value       Color   Description
0   1c0dff  Water
1   05450a  Evergreen needleleaf forest
2   086a10  Evergreen broadleaf forest
3   54a708  Deciduous needleleaf forest
4   78d203  Deciduous broadleaf forest
5   009900  Mixed forest
6   c6b044  Closed shrublands
7   dcd159  Open shrublands
8   dade48  Woody savannas
9   fbff13  Savannas
10  b6ff05  Grasslands
11  27ff87  Permanent wetlands
12  c24f44  Croplands
13  a5a5a5  Urban and built-up
14  ff6d4c  Cropland/natural vegetation mosaic
15  69fff8  Snow and ice
16  f9ffa4  Barren or sparsely vegetated
254 ffffff  Unclassified</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_class_table</code></td>
<td><code>str</code></td>
<td>
<p>An Earth Engine class table with triple quotes.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>Returns a legend dictionary that can be used to create a legend.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">legend_from_ee</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">):</span>
    <span class="sd">"""Extract legend from an Earth Engine class table on the Earth Engine Data Catalog page</span>
<span class="sd">    such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</span>

<span class="sd">    Value	Color	Description</span>
<span class="sd">    0	1c0dff	Water</span>
<span class="sd">    1	05450a	Evergreen needleleaf forest</span>
<span class="sd">    2	086a10	Evergreen broadleaf forest</span>
<span class="sd">    3	54a708	Deciduous needleleaf forest</span>
<span class="sd">    4	78d203	Deciduous broadleaf forest</span>
<span class="sd">    5	009900	Mixed forest</span>
<span class="sd">    6	c6b044	Closed shrublands</span>
<span class="sd">    7	dcd159	Open shrublands</span>
<span class="sd">    8	dade48	Woody savannas</span>
<span class="sd">    9	fbff13	Savannas</span>
<span class="sd">    10	b6ff05	Grasslands</span>
<span class="sd">    11	27ff87	Permanent wetlands</span>
<span class="sd">    12	c24f44	Croplands</span>
<span class="sd">    13	a5a5a5	Urban and built-up</span>
<span class="sd">    14	ff6d4c	Cropland/natural vegetation mosaic</span>
<span class="sd">    15	69fff8	Snow and ice</span>
<span class="sd">    16	f9ffa4	Barren or sparsely vegetated</span>
<span class="sd">    254	ffffff	Unclassified</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_class_table (str): An Earth Engine class table with triple quotes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Returns a legend dictionary that can be used to create a legend.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_class_table</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Value</span><span class="se">\t</span><span class="s1">Color</span><span class="se">\t</span><span class="s1">Description'</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="n">legend_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">legend_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

        <span class="k">return</span> <span class="n">legend_dict</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.load_GeoTIFF">
<code class="highlight language-python">
load_GeoTIFF<span class="p">(</span><span class="n">URL</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URL</code></td>
<td><code>str</code></td>
<td>
<p>The Cloud Storage URL of the GeoTIFF to load.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.Image</code></td>
<td>
<p>an Earth Engine image.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFF</span><span class="p">(</span><span class="n">URL</span><span class="p">):</span>
    <span class="sd">"""Loads a Cloud Optimized GeoTIFF (COG) as an Image. Only Google Cloud Storage is supported. The URL can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URL (str): The Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.Image: an Earth Engine image.</span>
<span class="sd">    """</span>

    <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">):</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'gs://'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

    <span class="n">cloud_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cloud_image</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.load_GeoTIFFs">
<code class="highlight language-python">
load_GeoTIFFs<span class="p">(</span><span class="n">URLs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:
Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif
Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URLs</code></td>
<td><code>list</code></td>
<td>
<p>A list of Cloud Storage URL of the GeoTIFF to load.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.ImageCollection</code></td>
<td>
<p>An Earth Engine ImageCollection.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">load_GeoTIFFs</span><span class="p">(</span><span class="n">URLs</span><span class="p">):</span>
    <span class="sd">"""Loads a list of Cloud Optimized GeoTIFFs (COG) as an ImageCollection. URLs is a list of URL, which can be one of the following formats:</span>
<span class="sd">    Option 1: gs://pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 2: https://storage.googleapis.com/pdd-stac/disasters/hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif</span>
<span class="sd">    Option 3: https://storage.cloud.google.com/gcp-public-data-landsat/LC08/01/044/034/LC08_L1TP_044034_20131228_20170307_01_T1/LC08_L1TP_044034_20131228_20170307_01_T1_B5.TIF</span>

<span class="sd">    Args:</span>
<span class="sd">        URLs (list): A list of Cloud Storage URL of the GeoTIFF to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.ImageCollection: An Earth Engine ImageCollection.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">URLs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'The URLs argument must be a list.'</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">URL</span> <span class="ow">in</span> <span class="n">URLs</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">URL</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.googleapis.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">):</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'https://storage.cloud.google.com/'</span><span class="p">,</span> <span class="s1">'gs://'</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'gs://'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">uri</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.tif'</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">'Invalid GCS URL: </span><span class="si">{}</span><span class="s1">. Expected something of the form "gs://bucket/path/to/object.tif".'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>

        <span class="n">URIs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">URIs</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">URIs</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">URIs</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">uri</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">loadGeoTIFF</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.minimum_bounding_box">
<code class="highlight language-python">
minimum_bounding_box<span class="p">(</span><span class="n">geojson</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Gets the minimum bounding box for a geojson polygon.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geojson</code></td>
<td><code>dict</code></td>
<td>
<p>A geojson dictionary.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tuple</code></td>
<td>
<p>Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">):</span>
    <span class="sd">"""Gets the minimum bounding box for a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        geojson (dict): A geojson dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: Returns a tuple containing the minimum bounding box in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -120)).</span>
<span class="sd">    """</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">'geometry'</span> <span class="ow">in</span> <span class="n">geojson</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s1">'geometry'</span><span class="p">][</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coordinates</span> <span class="o">=</span> <span class="n">geojson</span><span class="p">[</span><span class="s1">'coordinates'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lower_left</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">])</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">upper_right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">]),</span> <span class="nb">max</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                                             <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">])</span>  <span class="c1"># (lat, lon)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_left</span><span class="p">,</span> <span class="n">upper_right</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bounds</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.naip_timeseries">
<code class="highlight language-python">
naip_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Creates NAIP annual timeseries</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>An ee.Geometry representing the region of interest. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timeseries. Defaults to2009.</p>
</td>
<td><code>2009</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timeseries. Defaults to 2018.</p>
</td>
<td><code>2018</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>An ee.ImageCollection representing annual NAIP imagery.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">naip_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2009</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span><span class="p">):</span>
    <span class="sd">"""Creates NAIP annual timeseries</span>

<span class="sd">    Args:</span>
<span class="sd">        roi (object, optional): An ee.Geometry representing the region of interest. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timeseries. Defaults to2009.</span>
<span class="sd">        end_year (int, optional): Ending year for the timeseries. Defaults to 2018.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: An ee.ImageCollection representing annual NAIP imagery.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">get_annual_NAIP</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">collection</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'USDA/NAIP/DOQQ'</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">collection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
                <span class="n">start_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">end_date</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span> \
                    <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">listContains</span><span class="p">(</span><span class="s2">"system:band_names"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span>
                <span class="n">naip</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="n">naip</span><span class="p">)</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">return</span> <span class="n">naip</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">get_annual_NAIP</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.num_round">
<code class="highlight language-python">
num_round<span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Rounds a number to a specified number of decimal places.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>num</code></td>
<td><code>float</code></td>
<td>
<p>The number to round.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>decimal</code></td>
<td><code>int</code></td>
<td>
<p>The number of decimal places to round. Defaults to 2.</p>
</td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>
<p>The number with the specified decimal places rounded.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">num_round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">"""Rounds a number to a specified number of decimal places.</span>

<span class="sd">    Args:</span>
<span class="sd">        num (float): The number to round.</span>
<span class="sd">        decimal (int, optional): The number of decimal places to round. Defaults to 2.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The number with the specified decimal places rounded.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">decimal</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.nwi_add_color">
<code class="highlight language-python">
nwi_add_color<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts NWI vector dataset to image and add color to it.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Image</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">nwi_add_color</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Converts NWI vector dataset to image and add color to it.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): ee.FeatureCollection</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Image</span>
<span class="sd">    """</span>
    <span class="n">emergent</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span>
        <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'Freshwater Emergent Wetland'</span><span class="p">)))</span>
    <span class="n">emergent</span> <span class="o">=</span> <span class="n">emergent</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="s1">'R'</span><span class="p">,</span> <span class="mi">127</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'G'</span><span class="p">,</span> <span class="mi">195</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'B'</span><span class="p">,</span> <span class="mi">28</span><span class="p">))</span>
    <span class="c1"># print(emergent.first())</span>

    <span class="n">forested</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span>
        <span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'Freshwater Forested/Shrub Wetland'</span><span class="p">))</span>
    <span class="n">forested</span> <span class="o">=</span> <span class="n">forested</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'R'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'G'</span><span class="p">,</span> <span class="mi">136</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'B'</span><span class="p">,</span> <span class="mi">55</span><span class="p">))</span>

    <span class="n">pond</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'Freshwater Pond'</span><span class="p">))</span>
    <span class="n">pond</span> <span class="o">=</span> <span class="n">pond</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'R'</span><span class="p">,</span> <span class="mi">104</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'G'</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'B'</span><span class="p">,</span> <span class="mi">192</span><span class="p">))</span>

    <span class="n">lake</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'Lake'</span><span class="p">))</span>
    <span class="n">lake</span> <span class="o">=</span> <span class="n">lake</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'R'</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'G'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'B'</span><span class="p">,</span> <span class="mi">124</span><span class="p">))</span>

    <span class="n">riverine</span> <span class="o">=</span> <span class="n">fc</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">'WETLAND_TY'</span><span class="p">,</span> <span class="s1">'Riverine'</span><span class="p">))</span>
    <span class="n">riverine</span> <span class="o">=</span> <span class="n">riverine</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
        <span class="s1">'R'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'G'</span><span class="p">,</span> <span class="mi">144</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'B'</span><span class="p">,</span> <span class="mi">191</span><span class="p">))</span>

    <span class="n">fc</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">emergent</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
        <span class="n">forested</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pond</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">lake</span><span class="p">)</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">riverine</span><span class="p">))</span>

<span class="c1">#   base = ee.Image(0).mask(0).toInt8()</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span><span class="o">.</span><span class="n">byte</span><span class="p">()</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s1">'R'</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s1">'G'</span><span class="p">)</span>
                  <span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">)))</span>

    <span class="k">return</span> <span class="n">img</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.open_github">
<code class="highlight language-python">
open_github<span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Opens the GitHub repository for this package.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>subdir</code></td>
<td><code>str</code></td>
<td>
<p>Sub-directory of the repository. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">open_github</span><span class="p">(</span><span class="n">subdir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Opens the GitHub repository for this package.</span>

<span class="sd">    Args:</span>
<span class="sd">        subdir (str, optional): Sub-directory of the repository. Defaults to None.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://github.com/giswqs/eefolium'</span>

    <span class="k">if</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'source'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/eefolium/'</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'examples'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/examples'</span>
    <span class="k">elif</span> <span class="n">subdir</span> <span class="o">==</span> <span class="s1">'tutorials'</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s1">'/tree/master/tutorials'</span>

    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.open_youtube">
<code class="highlight language-python">
open_youtube<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Opens the YouTube tutorials for eefolium.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">open_youtube</span><span class="p">():</span>
    <span class="sd">"""Opens the YouTube tutorials for eefolium.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">webbrowser</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">'https://www.youtube.com/playlist?list=PLAxJ4-o7ZoPccOFv1dCwvGI6TYnirRTg3'</span>
    <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.random_string">
<code class="highlight language-python">
random_string<span class="p">(</span><span class="n">string_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates a random string of fixed length. </p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string_length</code></td>
<td><code>int</code></td>
<td>
<p>Fixed length. Defaults to 3.</p>
</td>
<td><code>3</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>A random string</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">random_string</span><span class="p">(</span><span class="n">string_length</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="sd">"""Generates a random string of fixed length. </span>

<span class="sd">    Args:</span>
<span class="sd">        string_length (int, optional): Fixed length. Defaults to 3.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A random string</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">random</span>
    <span class="kn">import</span> <span class="nn">string</span>

    <span class="c1"># random.seed(1001)</span>
    <span class="n">letters</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span>
    <span class="k">return</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">string_length</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.remove_geometry">
<code class="highlight language-python">
remove_geometry<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Remove .geo coordinate field from a FeatureCollection</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>The input FeatureCollection.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>The output FeatureCollection without the geometry field.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_geometry</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Remove .geo coordinate field from a FeatureCollection</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The input FeatureCollection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The output FeatureCollection without the geometry field.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">".*"</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.rename_bands">
<code class="highlight language-python">
rename_bands<span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Renames image bands.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>img</code></td>
<td><code>object</code></td>
<td>
<p>The image to be renamed.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_band_names</code></td>
<td><code>list</code></td>
<td>
<p>The list of of input band names.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_band_names</code></td>
<td><code>list</code></td>
<td>
<p>The list of output band names.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>The output image with the renamed bands.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">rename_bands</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">):</span>
    <span class="sd">"""Renames image bands.</span>

<span class="sd">    Args:</span>
<span class="sd">        img (object): The image to be renamed.</span>
<span class="sd">        in_band_names (list): The list of of input band names.</span>
<span class="sd">        out_band_names (list): The list of output band names.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The output image with the renamed bands.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">in_band_names</span><span class="p">,</span> <span class="n">out_band_names</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.rgb_to_hex">
<code class="highlight language-python">
rgb_to_hex<span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0 ‚Äì 255.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb</code></td>
<td><code>tuple</code></td>
<td>
<p>RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</p>
</td>
<td><code>(255, 255, 255)</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>str</code></td>
<td>
<p>hex color code</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">rgb_to_hex</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)):</span>
    <span class="sd">"""Converts RGB to hex color. In RGB color R stands for Red, G stands for Green, and B stands for Blue, and it ranges from the decimal value of 0 ‚Äì 255.</span>

<span class="sd">    Args:</span>
<span class="sd">        rgb (tuple, optional): RGB color code as a tuple of (red, green, blue). Defaults to (255, 255, 255).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: hex color code</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="s1">'</span><span class="si">%02x%02x%02x</span><span class="s1">'</span> <span class="o">%</span> <span class="n">rgb</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.search_ee_data">
<code class="highlight language-python">
search_ee_data<span class="p">(</span><span class="n">keywords</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Searches Earth Engine data catalog.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>keywords</code></td>
<td><code>str</code></td>
<td>
<p>Keywords to search for can be id, provider, tag and so on</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>
<p>Returns a lit of assets.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">search_ee_data</span><span class="p">(</span><span class="n">keywords</span><span class="p">):</span>
    <span class="sd">"""Searches Earth Engine data catalog.</span>

<span class="sd">    Args:</span>
<span class="sd">        keywords (str): Keywords to search for can be id, provider, tag and so on</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Returns a lit of assets.</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'geeadd search --keywords "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">keywords</span><span class="p">))</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">start_index</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'['</span><span class="p">)</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">start_index</span><span class="p">:])</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">assets</span><span class="p">:</span>
            <span class="n">asset_dates</span> <span class="o">=</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'start_date'</span><span class="p">]</span> <span class="o">+</span> <span class="s1">' - '</span> <span class="o">+</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'end_date'</span><span class="p">]</span>
            <span class="n">asset_snippet</span> <span class="o">=</span> <span class="n">asset</span><span class="p">[</span><span class="s1">'ee_id_snippet'</span><span class="p">]</span>
            <span class="n">start_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">"'"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">end_index</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">"'"</span><span class="p">,</span> <span class="n">start_index</span><span class="p">)</span>
            <span class="n">asset_id</span> <span class="o">=</span> <span class="n">asset_snippet</span><span class="p">[</span><span class="n">start_index</span><span class="p">:</span><span class="n">end_index</span><span class="p">]</span>

            <span class="n">asset</span><span class="p">[</span><span class="s1">'dates'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_dates</span>
            <span class="n">asset</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span>
            <span class="n">asset</span><span class="p">[</span><span class="s1">'uid'</span><span class="p">]</span> <span class="o">=</span> <span class="n">asset_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="s1">'_'</span><span class="p">)</span>
            <span class="c1"># asset['url'] = 'https://developers.google.com/earth-engine/datasets/catalog/' + asset['uid']</span>
            <span class="c1"># asset['thumbnail'] = 'https://mw1.google.com/ges/dd/images/{}_sample.png'.format(</span>
            <span class="c1">#     asset['uid'])</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.sentinel2_timeseries">
<code class="highlight language-python">
sentinel2_timeseries<span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'01-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'12-31'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Generates an annual Sentinel 2 ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.
   Images include both level 1C and level 2A imagery.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>roi</code></td>
<td><code>object</code></td>
<td>
<p>Region of interest to create the timelapse. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>start_year</code></td>
<td><code>int</code></td>
<td>
<p>Starting year for the timelapse. Defaults to 2015.</p>
</td>
<td><code>2015</code></td>
</tr>
<tr>
<td><code>end_year</code></td>
<td><code>int</code></td>
<td>
<p>Ending year for the timelapse. Defaults to 2019.</p>
</td>
<td><code>2019</code></td>
</tr>
<tr>
<td><code>start_date</code></td>
<td><code>str</code></td>
<td>
<p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '01-01'.</p>
</td>
<td><code>'01-01'</code></td>
</tr>
<tr>
<td><code>end_date</code></td>
<td><code>str</code></td>
<td>
<p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '12-31'.</p>
</td>
<td><code>'12-31'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Returns an ImageCollection containing annual Sentinel 2 images.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">sentinel2_timeseries</span><span class="p">(</span><span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">2015</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2019</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">'01-01'</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">'12-31'</span><span class="p">):</span>
    <span class="sd">"""Generates an annual Sentinel 2 ImageCollection. This algorithm is adapted from https://gist.github.com/jdbcode/76b9ac49faf51627ebd3ff988e10adbc. A huge thank you to Justin Braaten for sharing his fantastic work.</span>
<span class="sd">       Images include both level 1C and level 2A imagery.</span>
<span class="sd">    Args:</span>

<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 2015.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2019.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to '01-01'.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to '12-31'.</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: Returns an ImageCollection containing annual Sentinel 2 images.</span>
<span class="sd">    """</span>
    <span class="c1">################################################################################</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Input and output parameters.</span>
    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">datetime</span>

    <span class="c1"># ee_initialize()</span>

    <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># roi = ee.Geometry.Polygon(</span>
        <span class="c1">#     [[[-180, -80],</span>
        <span class="c1">#       [-180, 80],</span>
        <span class="c1">#         [180, 80],</span>
        <span class="c1">#         [180, -80],</span>
        <span class="c1">#         [-180, -80]]], None, False)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
            <span class="p">[[[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">]]],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'Could not convert the provided roi to ee.Geometry'</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>

    <span class="c1"># Adjusts longitudes less than -180 degrees or greater than 180 degrees.</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
    <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Setup vars to get dates.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&gt;=</span> <span class="mi">2015</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">start_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start year must be an integer &gt;= 2015.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">end_year</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&gt;=</span> <span class="mi">2015</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">end_year</span> <span class="o">&lt;=</span> <span class="mi">2020</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The end year must be an integer &lt;= 2020.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">start_date</span><span class="p">)</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">"[0-9]</span><span class="si">{2}</span><span class="s2">\-[0-9]</span><span class="si">{2}</span><span class="s2">"</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The start data and end date must be month-day, such as 06-10, 09-20'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input dates are invalid.'</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">start_test</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">start_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span>
            <span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="n">end_test</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="n">end_year</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">start_test</span> <span class="o">&gt;</span> <span class="n">end_test</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Start date must be prior to end date'</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">days_between</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">d2</span><span class="p">,</span> <span class="s2">"%Y-%m-</span><span class="si">%d</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">((</span><span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>

    <span class="n">n_days</span> <span class="o">=</span> <span class="n">days_between</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span><span class="p">,</span>
                          <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span><span class="p">)</span>
    <span class="n">start_month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">start_day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_date</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">start_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">start_date</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">end_year</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">end_date</span>

    <span class="c1"># # Define a collection filter by date, bounds, and quality.</span>
    <span class="c1"># def colFilter(col, aoi):  # , startDate, endDate):</span>
    <span class="c1">#     return(col.filterBounds(aoi))</span>

    <span class="c1"># Get Sentinel 2 collections, both Level-1C (top of atmophere) and Level-2A (surface reflectance)</span>
    <span class="n">MSILCcol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'COPERNICUS/S2'</span><span class="p">)</span>
    <span class="n">MSI2Acol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">'COPERNICUS/S2_SR'</span><span class="p">)</span>

    <span class="c1"># Define a collection filter by date, bounds, and quality.</span>
    <span class="k">def</span> <span class="nf">colFilter</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">col</span>
               <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
               <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">))</span>
        <span class="c1"># .filter('CLOUD_COVER &lt; 5')</span>
        <span class="c1"># .filter('GEOMETRIC_RMSE_MODEL &lt; 15')</span>
        <span class="c1"># .filter('IMAGE_QUALITY == 9 || IMAGE_QUALITY_OLI == 9'))</span>

    <span class="c1"># Function to get and rename bands of interest from MSI</span>
    <span class="k">def</span> <span class="nf">renameMSI</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span><span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">,</span> <span class="s1">'B4'</span><span class="p">,</span> <span class="s1">'B5'</span><span class="p">,</span> <span class="s1">'B6'</span><span class="p">,</span> <span class="s1">'B7'</span><span class="p">,</span>
                <span class="s1">'B8'</span><span class="p">,</span> <span class="s1">'B8A'</span><span class="p">,</span> <span class="s1">'B11'</span><span class="p">,</span> <span class="s1">'B12'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Red Edge 1'</span><span class="p">,</span> <span class="s1">'Red Edge 2'</span><span class="p">,</span> <span class="s1">'Red Edge 3'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'Red Edge 4'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">]))</span>

    <span class="c1"># Add NBR for LandTrendr segmentation.</span>

    <span class="k">def</span> <span class="nf">calcNbr</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">normalizedDifference</span><span class="p">([</span><span class="s1">'NIR'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">])</span>
                            <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">'NBR'</span><span class="p">))</span><span class="o">.</span><span class="n">int16</span><span class="p">())</span>

    <span class="c1"># Define function to mask out clouds and cloud shadows in images.</span>
    <span class="c1"># Use CFmask band included in USGS Landsat SR image product.</span>

    <span class="k">def</span> <span class="nf">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">cloudOpaqueBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span>
        <span class="n">cloudCirrusBitMask</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span>
        <span class="n">qa</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'QA60'</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudOpaqueBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudCirrusBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>

    <span class="c1"># Define function to prepare MSI images.</span>
    <span class="k">def</span> <span class="nf">prepMSI</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="n">img</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">renameMSI</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">fmask</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">copyProperties</span><span class="p">(</span><span class="n">orig</span><span class="p">,</span> <span class="n">orig</span><span class="o">.</span><span class="n">propertyNames</span><span class="p">()))</span>
               <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'bicubic'</span><span class="p">))</span>

    <span class="c1"># Get annual median collection.</span>
    <span class="k">def</span> <span class="nf">getAnnualComp</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">startDate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">fromYMD</span><span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_month</span><span class="p">),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">start_day</span><span class="p">))</span>
        <span class="n">endDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">n_days</span><span class="p">),</span> <span class="s1">'day'</span><span class="p">)</span>

        <span class="c1"># Filter collections and prepare them for merging.</span>
        <span class="n">MSILCcoly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">MSILCcol</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepMSI</span><span class="p">)</span>
        <span class="n">MSI2Acoly</span> <span class="o">=</span> <span class="n">colFilter</span><span class="p">(</span><span class="n">MSI2Acol</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">prepMSI</span><span class="p">)</span>

        <span class="c1"># Merge the collections.</span>
        <span class="n">col</span> <span class="o">=</span> <span class="n">MSILCcoly</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">MSI2Acoly</span><span class="p">)</span>

        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">nBands</span> <span class="o">=</span> <span class="n">yearImg</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
        <span class="n">yearImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
            <span class="n">nBands</span><span class="p">,</span>
            <span class="n">yearImg</span><span class="p">,</span>
            <span class="n">dummyImg</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="n">calcNbr</span><span class="p">(</span><span class="n">yearImg</span><span class="p">)</span>
               <span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'year'</span><span class="p">:</span> <span class="n">y</span><span class="p">,</span> <span class="s1">'system:time_start'</span><span class="p">:</span> <span class="n">startDate</span><span class="o">.</span><span class="n">millis</span><span class="p">(),</span> <span class="s1">'nBands'</span><span class="p">:</span> <span class="n">nBands</span><span class="p">}))</span>

    <span class="c1">################################################################################</span>

    <span class="c1"># Make a dummy image for missing years.</span>
    <span class="n">bandNames</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">([</span><span class="s1">'Blue'</span><span class="p">,</span> <span class="s1">'Green'</span><span class="p">,</span> <span class="s1">'Red'</span><span class="p">,</span> <span class="s1">'Red Edge 1'</span><span class="p">,</span>
                         <span class="s1">'Red Edge 2'</span><span class="p">,</span> <span class="s1">'Red Edge 3'</span><span class="p">,</span> <span class="s1">'NIR'</span><span class="p">,</span>
                         <span class="s1">'Red Edge 4'</span><span class="p">,</span> <span class="s1">'SWIR1'</span><span class="p">,</span> <span class="s1">'SWIR2'</span><span class="p">,</span> <span class="s1">'QA60'</span><span class="p">])</span>
    <span class="n">fillerValues</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bandNames</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
    <span class="n">dummyImg</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">fillerValues</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">bandNames</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">selfMask</span><span class="p">()</span><span class="o">.</span><span class="n">int16</span><span class="p">()</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Get a list of years</span>
    <span class="n">years</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="p">)</span>

    <span class="c1">################################################################################</span>
    <span class="c1"># Make list of annual image composites.</span>
    <span class="n">imgList</span> <span class="o">=</span> <span class="n">years</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">getAnnualComp</span><span class="p">)</span>

    <span class="c1"># Convert image composite list to collection</span>
    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="o">.</span><span class="n">fromImages</span><span class="p">(</span><span class="n">imgList</span><span class="p">)</span>

    <span class="n">imgCol</span> <span class="o">=</span> <span class="n">imgCol</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">roi</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">imgCol</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.set_proxy">
<code class="highlight language-python">
set_proxy<span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s1">'http://127.0.0.1'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Sets proxy if needed. This is only needed for countries where Google services are not available.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>port</code></td>
<td><code>int</code></td>
<td>
<p>The proxy port number. Defaults to 1080.</p>
</td>
<td><code>1080</code></td>
</tr>
<tr>
<td><code>ip</code></td>
<td><code>str</code></td>
<td>
<p>The IP address. Defaults to 'http://127.0.0.1'.</p>
</td>
<td><code>'http://127.0.0.1'</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">set_proxy</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="s1">'http://127.0.0.1'</span><span class="p">):</span>
    <span class="sd">"""Sets proxy if needed. This is only needed for countries where Google services are not available.</span>

<span class="sd">    Args:</span>
<span class="sd">        port (int, optional): The proxy port number. Defaults to 1080.</span>
<span class="sd">        ip (str, optional): The IP address. Defaults to 'http://127.0.0.1'.</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">import</span> <span class="nn">requests</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ip</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">):</span>
            <span class="n">ip</span> <span class="o">=</span> <span class="s1">'http://'</span> <span class="o">+</span> <span class="n">ip</span>
        <span class="n">proxy</span> <span class="o">=</span> <span class="s1">'</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'HTTP_PROXY'</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'HTTPS_PROXY'</span><span class="p">]</span> <span class="o">=</span> <span class="n">proxy</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://earthengine.google.com/'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s1">'Failed to connect to Earth Engine. Please double check the port number and ip address.'</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.shp_to_ee">
<code class="highlight language-python">
shp_to_ee<span class="p">(</span><span class="n">in_shp</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_shp</code></td>
<td><code>str</code></td>
<td>
<p>File path to a shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>Earth Engine objects representing the shapefile.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_ee</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
    <span class="sd">"""Converts a shapefile to Earth Engine objects. Note that the CRS of the shapefile must be EPSG:4326</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path to a shapefile.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: Earth Engine objects representing the shapefile.</span>
<span class="sd">    """</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">json_data</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ee_object</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.shp_to_geojson">
<code class="highlight language-python">
shp_to_geojson<span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a shapefile to GeoJSON.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_shp</code></td>
<td><code>str</code></td>
<td>
<p>File path of the input shapefile.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_json</code></td>
<td><code>str</code></td>
<td>
<p>File path of the output GeoJSON. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>The json object representing the shapefile.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">,</span> <span class="n">out_json</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Converts a shapefile to GeoJSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): File path of the input shapefile.</span>
<span class="sd">        out_json (str, optional): File path of the output GeoJSON. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: The json object representing the shapefile.</span>
<span class="sd">    """</span>
    <span class="c1"># check_install('pyshp')</span>
    <span class="c1"># ee_initialize()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="kn">import</span> <span class="nn">shapefile</span>
        <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">out_json</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out_json</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">".json"</span>

            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_json</span><span class="p">):</span>
                <span class="n">out_json</span> <span class="o">=</span> <span class="n">out_json</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.json'</span><span class="p">,</span> <span class="s1">'_bk.json'</span><span class="p">)</span>

        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">)):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_json</span><span class="p">))</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">]</span>
        <span class="n">buffer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sr</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">shapeRecords</span><span class="p">():</span>
            <span class="n">atr</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">sr</span><span class="o">.</span><span class="n">record</span><span class="p">))</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">__geo_interface__</span>
            <span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"Feature"</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geom</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="n">atr</span><span class="p">))</span>

        <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dumps</span><span class="p">({</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"FeatureCollection"</span><span class="p">,</span>
                             <span class="s2">"features"</span><span class="p">:</span> <span class="n">buffer</span><span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_json</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json_data</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.str_to_num">
<code class="highlight language-python">
str_to_num<span class="p">(</span><span class="n">in_str</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a string to an ee.Number.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_str</code></td>
<td><code>str</code></td>
<td>
<p>The string to convert to a number.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Number</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">str_to_num</span><span class="p">(</span><span class="n">in_str</span><span class="p">):</span>
    <span class="sd">"""Converts a string to an ee.Number.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_str (str): The string to convert to a number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Number</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.summarize_by_group">
<code class="highlight language-python">
summarize_by_group<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">,</span> <span class="n">return_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculates summary statistics by group.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>object</code></td>
<td>
<p>The input feature collection</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>column</code></td>
<td><code>str</code></td>
<td>
<p>The value column to calculate summary statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>group</code></td>
<td><code>str</code></td>
<td>
<p>The name of the group column.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>group_name</code></td>
<td><code>str</code></td>
<td>
<p>The new group name to use.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>stats_type</code></td>
<td><code>str</code></td>
<td>
<p>The type of summary statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>return_dict</code></td>
<td><code>bool</code></td>
<td>
<p>Whether to return the result as a dictionary.</p>
</td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.Dictionary or ee.List</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">summarize_by_group</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">stats_type</span><span class="p">,</span> <span class="n">return_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Calculates summary statistics by group.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (object): The input feature collection</span>
<span class="sd">        column (str): The value column to calculate summary statistics.</span>
<span class="sd">        group (str): The name of the group column.</span>
<span class="sd">        group_name (str): The new group name to use.</span>
<span class="sd">        stats_type (str): The type of summary statistics.</span>
<span class="sd">        return_dict (bool): Whether to return the result as a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.Dictionary or ee.List</span>
<span class="sd">    """</span>
    <span class="n">stats_type</span> <span class="o">=</span> <span class="n">stats_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allowed_stats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">,</span> <span class="s1">'mean'</span><span class="p">,</span>
                     <span class="s1">'median'</span><span class="p">,</span> <span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'stdDev'</span><span class="p">,</span> <span class="s1">'variance'</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">stats_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_stats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The stats type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_stats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">stats_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'min'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">'max'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s1">'mean'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">'median'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s1">'sum'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'stdDev'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s1">'variance'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="p">,</span> <span class="n">group</span><span class="p">]</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">reduceColumns</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
        <span class="s1">'selectors'</span><span class="p">:</span> <span class="n">selectors</span><span class="p">,</span>
        <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">stats_dict</span><span class="p">[</span><span class="n">stats_type</span><span class="p">]</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
            <span class="s1">'groupField'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'groupName'</span><span class="p">:</span> <span class="n">group_name</span>
        <span class="p">})</span>
    <span class="p">})</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'groups'</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">return_dict</span><span class="p">:</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">group_name</span><span class="p">))</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">stats_type</span><span class="p">))</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.summary_stats">
<code class="highlight language-python">
summary_stats<span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean, 
sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collection</code></td>
<td><code>FeatureCollection</code></td>
<td>
<p>The input feature collection to calculate summary statistics.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>column</code></td>
<td><code>str</code></td>
<td>
<p>The name of the column to calculate summary statistics.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dict</code></td>
<td>
<p>The dictionary containing information about the summary statistics.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">summary_stats</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
    <span class="sd">"""Aggregates over a given property of the objects in a collection, calculating the sum, min, max, mean, </span>
<span class="sd">    sample standard deviation, sample variance, total standard deviation and total variance of the selected property.</span>

<span class="sd">    Args:</span>
<span class="sd">        collection (FeatureCollection): The input feature collection to calculate summary statistics.</span>
<span class="sd">        column (str): The name of the column to calculate summary statistics.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: The dictionary containing information about the summary statistics.</span>
<span class="sd">    """</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">aggregate_stats</span><span class="p">(</span><span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stats</span><span class="p">))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.update_package">
<code class="highlight language-python">
update_package<span class="p">()</span> </code>
</h2>
<div class="doc doc-contents">
<p>Updates the eefolium package from the eefolium GitHub repository without the need to use pip or conda.
In this way, I don't have to keep updating pypi and conda-forge with every minor update of the package.</p>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">update_package</span><span class="p">():</span>
    <span class="sd">"""Updates the eefolium package from the eefolium GitHub repository without the need to use pip or conda.</span>
<span class="sd">        In this way, I don't have to keep updating pypi and conda-forge with every minor update of the package.</span>

<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">shutil</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">download_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">download_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">download_dir</span><span class="p">)</span>
        <span class="n">clone_repo</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">download_dir</span><span class="p">)</span>

        <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">download_dir</span><span class="p">,</span> <span class="s1">'eefolium-master'</span><span class="p">)</span>
        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="s1">'pip'</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip3 install .'</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s1">'pip install .'</span>

        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Please comment out 'eefolium.update_package()' and restart the kernel to take effect:</span><span class="se">\n</span><span class="s2">Jupyter menu -&gt; Kernel -&gt; Restart &amp; Clear Output"</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.vec_area">
<code class="highlight language-python">
vec_area<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculate the area (m2) of each each feature in a feature collection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>The feature collection to compute the area.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">vec_area</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Calculate the area (m2) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'area_m2'</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.vec_area_ha">
<code class="highlight language-python">
vec_area_ha<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculate the area (hectare) of each each feature in a feature collection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>The feature collection to compute the area.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_ha</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Calculate the area (hectare) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'area_ha'</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">1e4</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.vec_area_km2">
<code class="highlight language-python">
vec_area_km2<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculate the area (km2) of each each feature in a feature collection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>The feature collection to compute the area.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_km2</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Calculate the area (km2) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'area_km2'</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.vec_area_mi2">
<code class="highlight language-python">
vec_area_mi2<span class="p">(</span><span class="n">fc</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Calculate the area (square mile) of each each feature in a feature collection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fc</code></td>
<td><code>object</code></td>
<td>
<p>The feature collection to compute the area.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>object</code></td>
<td>
<p>ee.FeatureCollection</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">vec_area_mi2</span><span class="p">(</span><span class="n">fc</span><span class="p">):</span>
    <span class="sd">"""Calculate the area (square mile) of each each feature in a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        fc (object): The feature collection to compute the area.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ee.FeatureCollection</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">fc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s1">'area_mi2'</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="mf">2.59e6</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()}))</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.vis_to_qml">
<code class="highlight language-python">
vis_to_qml<span class="p">(</span><span class="n">ee_class_table</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Create a QGIS Layer Style (.qml) based on an Earth Engine class table from the Earth Engine Data Catalog page
such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</p>
<p>Value       Color   Description
0   1c0dff  Water
1   05450a  Evergreen needleleaf forest
2   086a10  Evergreen broadleaf forest
3   54a708  Deciduous needleleaf forest
4   78d203  Deciduous broadleaf forest
5   009900  Mixed forest
6   c6b044  Closed shrublands
7   dcd159  Open shrublands
8   dade48  Woody savannas
9   fbff13  Savannas
10  b6ff05  Grasslands
11  27ff87  Permanent wetlands
12  c24f44  Croplands
13  a5a5a5  Urban and built-up
14  ff6d4c  Cropland/natural vegetation mosaic
15  69fff8  Snow and ice
16  f9ffa4  Barren or sparsely vegetated
254 ffffff  Unclassified</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee_class_table</code></td>
<td><code>str</code></td>
<td>
<p>An Earth Engine class table with triple quotes.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_qml</code></td>
<td><code>str</code></td>
<td>
<p>File path to the output QGIS Layer Style (.qml).</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">vis_to_qml</span><span class="p">(</span><span class="n">ee_class_table</span><span class="p">,</span> <span class="n">out_qml</span><span class="p">):</span>
    <span class="sd">"""Create a QGIS Layer Style (.qml) based on an Earth Engine class table from the Earth Engine Data Catalog page</span>
<span class="sd">    such as https://developers.google.com/earth-engine/datasets/catalog/MODIS_051_MCD12Q1</span>

<span class="sd">    Value	Color	Description</span>
<span class="sd">    0	1c0dff	Water</span>
<span class="sd">    1	05450a	Evergreen needleleaf forest</span>
<span class="sd">    2	086a10	Evergreen broadleaf forest</span>
<span class="sd">    3	54a708	Deciduous needleleaf forest</span>
<span class="sd">    4	78d203	Deciduous broadleaf forest</span>
<span class="sd">    5	009900	Mixed forest</span>
<span class="sd">    6	c6b044	Closed shrublands</span>
<span class="sd">    7	dcd159	Open shrublands</span>
<span class="sd">    8	dade48	Woody savannas</span>
<span class="sd">    9	fbff13	Savannas</span>
<span class="sd">    10	b6ff05	Grasslands</span>
<span class="sd">    11	27ff87	Permanent wetlands</span>
<span class="sd">    12	c24f44	Croplands</span>
<span class="sd">    13	a5a5a5	Urban and built-up</span>
<span class="sd">    14	ff6d4c	Cropland/natural vegetation mosaic</span>
<span class="sd">    15	69fff8	Snow and ice</span>
<span class="sd">    16	f9ffa4	Barren or sparsely vegetated</span>
<span class="sd">    254	ffffff	Unclassified</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_class_table (str): An Earth Engine class table with triple quotes.</span>
<span class="sd">        out_qml (str): File path to the output QGIS Layer Style (.qml).</span>
<span class="sd">    """</span>
    <span class="kn">import</span> <span class="nn">pkg_resources</span>

    <span class="n">pkg_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span>
        <span class="n">pkg_resources</span><span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">"eefolium"</span><span class="p">,</span> <span class="s2">"eefolium.py"</span><span class="p">))</span>
    <span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkg_dir</span><span class="p">,</span> <span class="s1">'data'</span><span class="p">)</span>
    <span class="n">template_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">'template'</span><span class="p">)</span>
    <span class="n">qml_template</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">template_dir</span><span class="p">,</span> <span class="s1">'NLCD.qml'</span><span class="p">)</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">out_qml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">qml_template</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:</span><span class="mi">31</span><span class="p">]</span>
        <span class="n">footer</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">51</span><span class="p">:]</span>

    <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ee_class_table</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ee_class_table</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Value</span><span class="se">\t</span><span class="s1">Color</span><span class="se">\t</span><span class="s1">Description'</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="s1">'        &lt;paletteEntry alpha="255" color="#</span><span class="si">{}</span><span class="s1">" value="</span><span class="si">{}</span><span class="s1">" label="</span><span class="si">{}</span><span class="s1">"/&gt;</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
            <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

        <span class="n">out_lines</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">entries</span> <span class="o">+</span> <span class="n">footer</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_qml</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">out_lines</span><span class="p">)</span>      <br/>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.xy_to_points">
<code class="highlight language-python">
xy_to_points<span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">'latitude'</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">'longitude'</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Converts a csv containing points (latitude and longitude) into an ee.FeatureCollection.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_csv</code></td>
<td><code>str</code></td>
<td>
<p>File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>latitude</code></td>
<td><code>str</code></td>
<td>
<p>Column name for the latitude column. Defaults to 'latitude'.</p>
</td>
<td><code>'latitude'</code></td>
</tr>
<tr>
<td><code>longitude</code></td>
<td><code>str</code></td>
<td>
<p>Column name for the longitude column. Defaults to 'longitude'.</p>
</td>
<td><code>'longitude'</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ee.FeatureCollection</code></td>
<td>
<p>The ee.FeatureCollection containing the points converted from the input csv.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">xy_to_points</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">'latitude'</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">'longitude'</span><span class="p">):</span>
    <span class="sd">"""Converts a csv containing points (latitude and longitude) into an ee.FeatureCollection.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): File path or HTTP URL to the input csv file. For example, https://raw.githubusercontent.com/giswqs/data/main/world/world_cities.csv</span>
<span class="sd">        latitude (str, optional): Column name for the latitude column. Defaults to 'latitude'.</span>
<span class="sd">        longitude (str, optional): Column name for the longitude column. Defaults to 'longitude'.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ee.FeatureCollection: The ee.FeatureCollection containing the points converted from the input csv.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">'http'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">'.csv'</span><span class="p">):</span>
        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">'~'</span><span class="p">),</span> <span class="s1">'Downloads'</span><span class="p">)</span>
        <span class="n">out_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
        <span class="n">download_from_url</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">)</span>
        <span class="n">in_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">out_name</span><span class="p">)</span>

    <span class="n">in_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_csv</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">'The provided csv file does not exist.'</span><span class="p">)</span>

    <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">latitude</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">longitude</span><span class="p">])</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">])</span>

    <span class="n">ee_list</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="n">ee_points</span> <span class="o">=</span> <span class="n">ee_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">xy</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">xy</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">(</span><span class="n">ee_points</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.zonal_statistics">
<code class="highlight language-python">
zonal_statistics<span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'MEAN'</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_value_raster</code></td>
<td><code>object</code></td>
<td>
<p>An ee.Image that contains the values on which to calculate a statistic.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_zone_vector</code></td>
<td><code>object</code></td>
<td>
<p>An ee.FeatureCollection that defines the zones.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_file_path</code></td>
<td><code>str</code></td>
<td>
<p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>statistics_type</code></td>
<td><code>str</code></td>
<td>
<p>Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</p>
</td>
<td><code>'MEAN'</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>tile_scale</code></td>
<td><code>float</code></td>
<td>
<p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zonal_statistics</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'MEAN'</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""Summarizes the values of a raster within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An ee.Image that contains the values on which to calculate a statistic.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Statistic type to be calculated. Defaults to 'MEAN'. For 'HIST', you can provide three parameters: max_buckets, min_bucket_width, and max_raw. For 'FIXED_HIST', you must provide three parameters: hist_min, hist_max, and hist_steps.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>
<span class="sd">    """</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input raster must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input zone data must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="c1"># Parameters for histogram</span>
    <span class="c1"># The maximum number of buckets to use when building a histogram; will be rounded up to a power of 2.</span>
    <span class="n">max_buckets</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The minimum histogram bucket width, or null to allow any power of 2.</span>
    <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># The number of values to accumulate before building the initial histogram.</span>
    <span class="n">max_raw</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hist_min</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># The lower (inclusive) bound of the first bucket.</span>
    <span class="n">hist_max</span> <span class="o">=</span> <span class="mf">100.0</span>  <span class="c1"># The upper (exclusive) bound of the last bucket.</span>
    <span class="n">hist_steps</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># The number of buckets to use.</span>

    <span class="k">if</span> <span class="s1">'max_buckets'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_buckets</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_buckets'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'min_bucket_width'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">min_bucket_width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'min_bucket'</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">'max_raw'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">max_raw</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'max_raw'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'FIXED_HIST'</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_min'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_max'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'hist_steps'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">hist_min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_min'</span><span class="p">]</span>
        <span class="n">hist_max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_max'</span><span class="p">]</span>
        <span class="n">hist_steps</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'hist_steps'</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'FIXED_HIST'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'To use fixedHistogram, please provide these three parameters: hist_min, hist_max, and hist_steps.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'MEAN'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span>
        <span class="s1">'MAXIMUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
        <span class="s1">'MEDIAN'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span>
        <span class="s1">'MINIMUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
        <span class="s1">'STD'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">stdDev</span><span class="p">(),</span>
        <span class="s1">'MIN_MAX'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">minMax</span><span class="p">(),</span>
        <span class="s1">'SUM'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
        <span class="s1">'VARIANCE'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">variance</span><span class="p">(),</span>
        <span class="s1">'HIST'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">maxBuckets</span><span class="o">=</span><span class="n">max_buckets</span><span class="p">,</span> <span class="n">minBucketWidth</span><span class="o">=</span><span class="n">min_bucket_width</span><span class="p">,</span> <span class="n">maxRaw</span><span class="o">=</span><span class="n">max_raw</span><span class="p">),</span>
        <span class="s1">'FIXED_HIST'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">fixedHistogram</span><span class="p">(</span><span class="n">hist_min</span><span class="p">,</span> <span class="n">hist_max</span><span class="p">,</span> <span class="n">hist_steps</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The statistics type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="o">.</span><span class="n">keys</span><span class="p">()))))</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Computing statistics ...'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span>
            <span class="n">collection</span><span class="o">=</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">reducer</span><span class="o">=</span><span class="n">allowed_statistics</span><span class="p">[</span><span class="n">statistics_type</span><span class="p">],</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">tileScale</span><span class="o">=</span><span class="n">tile_scale</span><span class="p">)</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="eefolium.common.zonal_statistics_by_group">
<code class="highlight language-python">
zonal_statistics_by_group<span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents">
<p>Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>in_value_raster</code></td>
<td><code>object</code></td>
<td>
<p>An integer Image that contains the values on which to calculate area/percentage.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>in_zone_vector</code></td>
<td><code>object</code></td>
<td>
<p>An ee.FeatureCollection that defines the zones.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>out_file_path</code></td>
<td><code>str</code></td>
<td>
<p>Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>statistics_type</code></td>
<td><code>str</code></td>
<td>
<p>Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</p>
</td>
<td><code>'SUM'</code></td>
</tr>
<tr>
<td><code>decimal_places</code></td>
<td><code>int</code></td>
<td>
<p>The number of decimal places to use. Defaults to 0.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>denominator</code></td>
<td><code>float</code></td>
<td>
<p>To covert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td>
<p>A nominal scale in meters of the projection to work in. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>crs</code></td>
<td><code>str</code></td>
<td>
<p>The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>tile_scale</code></td>
<td><code>float</code></td>
<td>
<p>A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</p>
</td>
<td><code>1.0</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>eefolium/common.py</code></summary>
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">zonal_statistics_by_group</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">out_file_path</span><span class="p">,</span> <span class="n">statistics_type</span><span class="o">=</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tile_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">"""Summarizes the area or percentage of a raster by group within the zones of another dataset and exports the results as a csv, shp, json, kml, or kmz.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_value_raster (object): An integer Image that contains the values on which to calculate area/percentage.</span>
<span class="sd">        in_zone_vector (object): An ee.FeatureCollection that defines the zones.</span>
<span class="sd">        out_file_path (str): Output file path that will contain the summary of the values in each zone. The file type can be: csv, shp, json, kml, kmz</span>
<span class="sd">        statistics_type (str, optional): Can be either 'SUM' or 'PERCENTAGE' . Defaults to 'SUM'.</span>
<span class="sd">        decimal_places (int, optional): The number of decimal places to use. Defaults to 0.</span>
<span class="sd">        denominator (float, optional): To covert area units (e.g., from square meters to square kilometers). Defaults to 1.0.</span>
<span class="sd">        scale (float, optional): A nominal scale in meters of the projection to work in. Defaults to None.</span>
<span class="sd">        crs (str, optional): The projection to work in. If unspecified, the projection of the image's first band is used. If specified in addition to scale, rescaled to the specified scale. Defaults to None.</span>
<span class="sd">        tile_scale (float, optional): A scaling factor used to reduce aggregation tile size; using a larger tileScale (e.g. 2 or 4) may enable computations that run out of memory with the default. Defaults to 1.0.</span>

<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input raster must be an ee.Image.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_count</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">band_name</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="k">if</span> <span class="n">band_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">band_name</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input image can only have one band.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">band_types</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">bandTypes</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="n">band_type</span> <span class="o">=</span> <span class="n">band_types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'precision'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">band_type</span> <span class="o">!=</span> <span class="s1">'int'</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input image band must be integer type.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_zone_vector</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The input zone data must be an ee.FeatureCollection.'</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'csv'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">,</span> <span class="s1">'kml'</span><span class="p">,</span> <span class="s1">'kmz'</span><span class="p">,</span> <span class="s1">'shp'</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># name = os.path.splitext(basename)[0]</span>
    <span class="n">filetype</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">basename</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">filetype</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The file type must be one of the following: </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">allowed_statistics</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'SUM'</span><span class="p">,</span> <span class="s1">'PERCENTAGE'</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">statistics_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_statistics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'The statistics type can only be one of </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_statistics</span><span class="p">)))</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">projection</span><span class="p">()</span><span class="o">.</span><span class="n">nominalScale</span><span class="p">()</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">'Computing ... '</span><span class="p">)</span>
        <span class="n">geometry</span> <span class="o">=</span> <span class="n">in_zone_vector</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>

        <span class="n">hist</span> <span class="o">=</span> <span class="n">in_value_raster</span><span class="o">.</span><span class="n">reduceRegion</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">frequencyHistogram</span><span class="p">(</span>
        <span class="p">),</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span> <span class="n">bestEffort</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">)</span>
        <span class="n">class_values</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">band_name</span><span class="p">))</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">))</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="n">class_names</span> <span class="o">=</span> <span class="n">class_values</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">'Class_'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">()))</span>

        <span class="c1"># class_count = class_values.size().getInfo()</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">pixelArea</span><span class="p">()</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">denominator</span><span class="p">)</span><span class="o">.</span><span class="n">addBands</span><span class="p">(</span><span class="n">in_value_raster</span><span class="p">)</span>

        <span class="n">init_result</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">reduceRegions</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
            <span class="s1">'collection'</span><span class="p">:</span> <span class="n">in_zone_vector</span><span class="p">,</span>
            <span class="s1">'reducer'</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
                <span class="s1">'groupField'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s1">'groupName'</span><span class="p">:</span> <span class="s1">'group'</span><span class="p">,</span>
            <span class="p">}),</span>
            <span class="s1">'scale'</span><span class="p">:</span> <span class="n">scale</span>
        <span class="p">})</span>

        <span class="c1"># def build_dict(input_list):</span>

        <span class="c1">#     decimal_format = '%.{}f'.format(decimal_places)</span>
        <span class="c1">#     in_dict = input_list.map(lambda x: ee.Dictionary().set(ee.String('Class_').cat(</span>
        <span class="c1">#         ee.Number(ee.Dictionary(x).get('group')).format()), ee.Number.parse(ee.Number(ee.Dictionary(x).get('sum')).format(decimal_format))))</span>
        <span class="c1">#     return in_dict</span>

        <span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s1">'Class_'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'group'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">()))</span>

        <span class="k">def</span> <span class="nf">get_values</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
            <span class="n">decimal_format</span> <span class="o">=</span> <span class="s1">'%.</span><span class="si">{}</span><span class="s1">f'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_places</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">input_list</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'sum'</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">decimal_format</span><span class="p">)))</span>

        <span class="k">def</span> <span class="nf">set_attribute</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'groups'</span><span class="p">))</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">get_keys</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">get_values</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
            <span class="n">total_area</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>

            <span class="k">def</span> <span class="nf">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">cls_value</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Algorithms</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="n">statistics_type</span><span class="p">)</span><span class="o">.</span><span class="n">compareTo</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">String</span><span class="p">(</span>
                    <span class="s1">'SUM'</span><span class="p">)),</span> <span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">cls_value</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Number</span><span class="p">(</span><span class="n">total_area</span><span class="p">)),</span> <span class="n">cls_value</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">cls_value</span>

            <span class="n">full_values</span> <span class="o">=</span> <span class="n">class_names</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">get_class_values</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Dictionary</span><span class="o">.</span><span class="n">fromLists</span><span class="p">(</span><span class="n">class_names</span><span class="p">,</span> <span class="n">full_values</span><span class="p">)</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">attr_dict</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'Class_sum'</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attr_dict</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">'groups'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">final_result</span> <span class="o">=</span> <span class="n">init_result</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">set_attribute</span><span class="p">)</span>
        <span class="n">ee_export_vector</span><span class="p">(</span><span class="n">final_result</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<hr/>
<div class="md-source-date">
<small>
    
      Last update: 2020-12-08
    
  </small>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../faq/" rel="prev">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                FAQ
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../conversion/" rel="next">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                conversion module
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/vendor.0ac82a11.min.js"></script>
<script src="../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>